/**
 * myscript - The JavaScript library for the MyScript Cloud recognition service
 * @version 1.1.2-33-gf803796
 * @link https://myscript.github.io/MyScriptJS/
 * @license Apache-2.0
 */
!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,i.prototype=new o,i})}(),MyScript={RecognitionType:{TEXT:"TEXT",MATH:"MATH",SHAPE:"SHAPE",MUSIC:"MUSIC",ANALYZER:"ANALYZER"},InputMode:{CURSIVE:"CURSIVE",ISOLATED:"ISOLATED",SUPERIMPOSED:"SUPERIMPOSED",VERTICAL:"VERTICAL"},InputType:{CHAR:"CHAR",WORD:"WORD",SINGLE_LINE_TEXT:"SINGLE_LINE_TEXT",MULTI_LINE_TEXT:"MULTI_LINE_TEXT"},ResultDetail:{TEXT:"TEXT",WORD:"WORD",CHARACTER:"CHARACTER"},ResultType:{Math:{LATEX:"LATEX",MATHML:"MATHML",SYMBOLTREE:"SYMBOLTREE"},Music:{MUSICXML:"MUSICXML",SCORETREE:"SCORETREE"}},Protocol:{WS:"WebSocket",REST:"REST"}},function(t){function e(t){t&&(this.x=t.x,this.y=t.y)}e.prototype.getX=function(){return this.x},e.prototype.setX=function(t){this.x=t},e.prototype.getY=function(){return this.y},e.prototype.setY=function(t){this.y=t},t.Point=e}(MyScript),function(t){function e(e){t.Point.call(this,e),this.pressure=.5,this.distance=0,this.length=0,this.cos=0,this.sin=0,this.p1=new t.Point(e),this.p2=new t.Point(e),e&&(this.pressure=e.pressure,this.distance=e.distance,this.length=e.length,this.cos=e.cos,this.sin=e.sin,this.p1=new t.Point(e.p1),this.p2=new t.Point(e.p2))}e.prototype=new t.Point,e.prototype.constructor=e,e.prototype.getPressure=function(){return this.pressure},e.prototype.setPressure=function(t){this.pressure=t},e.prototype.getDistance=function(){return this.distance},e.prototype.setDistance=function(t){this.distance=t},e.prototype.getLength=function(){return this.length},e.prototype.setLength=function(t){this.length=t},e.prototype.getCos=function(){return this.cos},e.prototype.setCos=function(t){this.cos=t},e.prototype.getSin=function(){return this.sin},e.prototype.setSin=function(t){this.sin=t},e.prototype.getP1=function(){return this.p1},e.prototype.setP1=function(t){this.p1=t},e.prototype.getP2=function(){return this.p2},e.prototype.setP2=function(t){this.p2=t},t.QuadraticPoint=e}(MyScript),function(t){function e(t){t&&(this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height)}e.prototype.getX=function(){return this.x},e.prototype.setX=function(t){this.x=t},e.prototype.getY=function(){return this.y},e.prototype.setY=function(t){this.y=t},e.prototype.getTopLeftPoint=function(){var e=new t.Point;return e.setX(this.x),e.setY(this.y),e},e.prototype.setTopLeftPoint=function(t){this.x=t.getX(),this.y=t.getY()},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){this.height=t},t.Rectangle=e}(MyScript),function(t){function e(){this.writing=!1,this.strokes=[],this.currentStroke=null,this.undoRedoStack=[]}e.prototype.isWriting=function(){return this.writing},e.prototype.getCurrentStroke=function(){return this.currentStroke},e.prototype.startInkCapture=function(e,n,o){if(this.writing)throw new Error("Stroke capture already running");this.isRedoEmpty()||this.clearUndoRedoStack(),this.currentStroke=new t.Stroke,this.currentStroke.addX(e),this.currentStroke.addY(n),this.currentStroke.addT(o),this.writing=!0},e.prototype.continueInkCapture=function(t,e,n){if(!this.writing)throw new Error("Missing startInkCapture");this.currentStroke.addX(t),this.currentStroke.addY(e),this.currentStroke.addT(n)},e.prototype.endInkCapture=function(){if(!this.writing)throw new Error("Missing startInkCapture");this.strokes.push(this.currentStroke),this.writing=!1},e.prototype.clear=function(){this.writing=!1,this.strokes=[],this.currentStroke=null,this.undoRedoStack=[]},e.prototype.isEmpty=function(){return 0===this.strokes.length},e.prototype.isRedoEmpty=function(){return 0===this.undoRedoStack.length},e.prototype.undo=function(){this.isEmpty()||this.undoRedoStack.push(this.strokes.pop())},e.prototype.redo=function(){this.isRedoEmpty()||this.strokes.push(this.undoRedoStack.pop())},e.prototype.getStrokes=function(){return this.strokes},e.prototype.getUndoRedoStack=function(){return this.undoRedoStack},e.prototype.clearUndoRedoStack=function(){this.undoRedoStack=[]},e.prototype.copy=function(t,e){for(e;e<this.strokes.length;e++)t.push(this.strokes[e])},t.InkManager=e}(MyScript),function(t){function e(){this.color="black",this.rectColor="rgba(0, 0, 0, 0.2)",this.font="Times New Roman",this.decoration="",this.width=4,this.pressureType="SIMULATED",this.alpha="1.0"}e.prototype.getColor=function(){return this.color},e.prototype.setColor=function(t){this.color=t},e.prototype.getRectColor=function(){return this.rectColor},e.prototype.setRectColor=function(t){this.rectColor=t},e.prototype.getFont=function(){return this.font},e.prototype.setFont=function(t){this.font=t},e.prototype.getDecoration=function(){return this.decoration},e.prototype.setDecoration=function(t){this.decoration=t},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.getPressureType=function(){return this.pressureType},e.prototype.setPressureType=function(t){this.pressureType=t},e.prototype.getAlpha=function(){return this.alpha},e.prototype.setAlpha=function(t){this.alpha=t},t.PenParameters=e}(MyScript),function(t){function e(){t.PenParameters.call(this)}e.prototype=new t.PenParameters,e.prototype.constructor=e,t.RenderingParameters=e}(MyScript),function(t){function e(){}e.getEllipseArcRect=function(e,n,o,i,r,s){var a,c,p,u,h,g,l,y,f,d,m,S,R,w,M,C,v,T,b=.02,P=function(t,e){return t-e};for(p=u=Math.cos(i),h=g=Math.sin(i),p*=n,u*=o,h*=n,g*=o,f=Math.abs(s)/b,d=[],m=[],S=0;f>=S;S++)a=r+S/f*s,c=Math.atan2(Math.sin(a)/o,Math.cos(a)/n),l=Math.cos(c),y=Math.sin(c),R=e.x+p*l-g*y,w=e.y+u*y+h*l,d.push(R),m.push(w);return d.sort(P),m.sort(P),M=d[0],C=d[d.length-1],v=m[0],T=m[m.length-1],new t.Rectangle({x:M,y:v,width:C-M,height:T-v})},e.getLineRect=function(e,n){var o=e.x,i=n.x,r=Math.min(o,i),s=Math.max(o,i),a=e.y,c=n.y,p=Math.min(a,c),u=Math.max(a,c);return new t.Rectangle({x:r,y:p,width:s-r,height:u-p})},e.getBoundingRect=function(e){var n=[],o=[];for(var i in e){var r=e[i];n.push(r.getX()),n.push(r.getX()+r.getWidth()),o.push(r.getY()),o.push(r.getY()+r.getHeight())}var s=Math.min.apply(Math,n),a=Math.max.apply(Math,n),c=Math.min.apply(Math,o),p=Math.max.apply(Math,o);return new t.Rectangle({x:s,y:c,width:a-s,height:p-c})},e.getComputedSlope=function(t,e){return(e.getY()-t.getY())/(e.getX()-t.getX())},e.getSheathPoints=function(e,n,o){var i=Math.sqrt(Math.pow(o,2)/(1+1/Math.pow(n,2))),r=-(1/n)*i;return{p1:new t.Point({x:i+e.getX(),y:r+e.getY()}),p2:new t.Point({x:-i+e.getX(),y:-r+e.getY()})}},t.MathUtils=e}(MyScript),function(t){function e(t){t&&(this.type=t.type)}e.prototype.getType=function(){return this.type},t.AbstractWSMessage=e}(MyScript),function(t){function e(){}e.prototype.getType=function(){return this.type},e.prototype.setType=function(t){this.type=t},e.prototype.getBoundingBox=function(){throw new Error("not implemented")},e.prototype.setBoundingBox=function(t){throw new Error("not implemented")},t.AbstractComponent=e}(MyScript),function(t){function e(e){t.AbstractComponent.call(this),this.type="stroke",this.x=[],this.y=[],this.t=[],e&&(this.x=e.x,this.y=e.y,this.t=e.t)}e.prototype=new t.AbstractComponent,e.prototype.constructor=e,e.prototype.getX=function(){return this.x},e.prototype.setX=function(t){this.x=t},e.prototype.addX=function(t){null!==t&&void 0!==t&&this.x.push(t)},e.prototype.getY=function(){return this.y},e.prototype.setY=function(t){this.y=t},e.prototype.addY=function(t){null!==t&&void 0!==t&&this.y.push(t)},e.prototype.getT=function(){return this.t},e.prototype.setT=function(t){this.t=t},e.prototype.addT=function(t){null!==t&&void 0!==t&&this.t.push(t)},e.prototype.getLength=function(){return this.x.length},e.prototype.getBoundingBox=function(){var e=new t.Rectangle;return e.setX(Math.min.apply(Math,this.getX())),e.setY(Math.min.apply(Math,this.getY())),e.setWidth(Math.max.apply(Math,this.getX())-e.getX()),e.setHeight(Math.max.apply(Math,this.getY())-e.getY()),e},t.Stroke=e}(MyScript),function(t){function e(e){t.Stroke.call(this),this.p=[],this.d=[],this.l=[],this.color=void 0,this.alpha=void 0,this.width=0,e&&(this.p=e.p,this.d=e.p,this.l=e.l,this.color=e.color,this.alpha=e.alpha,this.width=e.width)}e.prototype=new t.Stroke,e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:this.type,x:this.x,y:this.y,t:this.t}},e.prototype.getP=function(){return this.p},e.prototype.setP=function(t){this.p=t},e.prototype.addP=function(t){null!==t&&void 0!==t&&this.p.push(t)},e.prototype.getD=function(){return this.d},e.prototype.setD=function(t){this.d=t},e.prototype.addD=function(t){null!==t&&void 0!==t&&this.d.push(t)},e.prototype.getL=function(){return this.l},e.prototype.setL=function(t){this.l=t},e.prototype.addL=function(t){null!==t&&void 0!==t&&this.l.push(t)},e.prototype.getColor=function(){return this.color},e.prototype.setColor=function(t){this.color=t},e.prototype.getAlpha=function(){return this.alpha},e.prototype.setAlpha=function(t){this.alpha=t},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){this.width=t},e.prototype.addPoint=function(t,e,n){this.filterPointByAcquisitionDelta(t,e)&&(this.addX(t),this.addY(e),this.addT(n),this.addP(this.computeP(t,e)),this.addD(this.computeD(t,e)),this.addL(this.computeL(t,e)))},e.prototype.getLastIndexPoint=function(){return this.x.length-1},e.prototype.getPointByIndex=function(t){var e;return void 0!==t&&t>=0&&t<this.getLength()&&(e={x:this.getX()[t],y:this.getY()[t],t:this.getT()[t],p:this.getP()[t],d:this.getD()[t],l:this.getL()[t]}),e},e.prototype.computeD=function(t,e){var n=Math.sqrt(Math.pow(e-this.getY()[this.getLastIndexPoint()-1],2)+Math.pow(t-this.getX()[this.getLastIndexPoint()-1],2));return isNaN(n)&&(n=0),n},e.prototype.computeL=function(t,e){var n=this.getL()[this.getLastIndexPoint()-1]+this.computeD(t,e);return isNaN(n)&&(n=0),n},e.prototype.computeP=function(t,e){var n=1,o=this.computeD(t,e),i=this.computeL(t,e);0===i?n=.5:o==i?n=1:10>o?n=.2+Math.pow(.1*o,.4):o>i-10&&(n=.2+Math.pow(.1*(i-o),.4));var r=n*Math.max(.1,1-.1*Math.sqrt(o));return isNaN(parseFloat(r))&&(r=.5),r},e.prototype.filterPointByAcquisitionDelta=function(t,e){var n=2+this.getWidth()/4,o=!1;return(0===this.getLength()||Math.abs(this.getX()[this.getLastIndexPoint()]-t)>=n||Math.abs(this.getY()[this.getLastIndexPoint()]-e)>=n)&&(o=!0),o},t.StrokeComponent=e}(MyScript),function(t){function e(){t.AbstractComponent.call(this),this.type="inputCharacter",this.alternates=[]}e.prototype=new t.AbstractComponent,e.prototype.constructor=e,e.prototype.getAlternates=function(){return this.alternates},e.prototype.setAlternates=function(t){this.alternates=t},e.prototype.addAlternate=function(t){this.alternates.push(t)},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setBoundingBox=function(t){this.boundingBox=t},t.CharacterInputComponent=e}(MyScript),function(t){function e(t,e){this.alternate=t,this.probability=e}e.prototype.getAlternate=function(){return this.alternate},e.prototype.setAlternate=function(t){this.alternate=t},e.prototype.getProbability=function(){return this.probability},e.prototype.setProbability=function(t){this.probability=t},t.CharacterInputComponentAlternate=e}(MyScript),function(t){function e(){}t.AbstractParameter=e}(MyScript),function(t){function e(){}t.AbstractRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype.getApplicationKey=function(){return this.applicationKey},e.prototype.setApplicationKey=function(t){this.applicationKey=t},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setInstanceId=function(t){this.instanceId=t},e.prototype.getHmac=function(){return this.hmac},e.prototype.setHmac=function(t){this.hmac=t},t.AbstractRecognitionData=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getInputMode=function(){return this.inputMode},e.prototype.setInputMode=function(t){this.inputMode=t},t.RecognitionLanguagesData=e}(MyScript),function(t){function e(e){this.type="start",t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,t.AbstractStartRequestWSMessage=e}(MyScript),function(t){function e(e){this.type="continue",t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setInstanceId=function(t){this.instanceId=t},t.AbstractContinueRequestWSMessage=e}(MyScript),function(t){function e(e){this.type="hmac",t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getChallenge=function(){return this.challenge},e.prototype.setChallenge=function(t){this.challenge=t},e.prototype.getApplicationKey=function(){return this.applicationKey},e.prototype.setApplicationKey=function(t){this.applicationKey=t},e.prototype.getHmacSignature=function(){return this.hmac},e.prototype.setHmacSignature=function(t){this.hmac=t},t.ChallengeRequestWSMessage=e}(MyScript),function(t){function e(e){this.type="applicationKey",t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getApplicationKey=function(){return this.applicationKey},e.prototype.setApplicationKey=function(t){this.applicationKey=t},t.InitRequestWSMessage=e}(MyScript),function(t){function e(e){this.type="reset",t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,t.ResetRequestWSMessage=e}(MyScript),function(t){function e(){t.AbstractComponent.call(this)}e.prototype=new t.AbstractComponent,e.prototype.constructor=e,e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setBoundingBox=function(t){this.boundingBox=t},t.AbstractTextInputComponent=e}(MyScript),function(t){function e(){this.type="char"}e.prototype=new t.AbstractTextInputComponent,e.prototype.constructor=e,e.prototype.getCharacter=function(){return this.character},e.prototype.setCharacter=function(t){this.character=t},e.prototype.getLabel=function(){return this.character},e.prototype.setLabel=function(t){this.character=t},t.CharInputComponent=e}(MyScript),function(t){function e(){this.type="string"}e.prototype=new t.AbstractTextInputComponent,e.prototype.constructor=e,e.prototype.getString=function(){return this.string},e.prototype.setString=function(t){this.string=t},e.prototype.getLabel=function(){return this.string},e.prototype.setLabel=function(t){this.string=t},t.StringInputComponent=e}(MyScript),function(t){function e(){this.textInputType="MULTI_LINE_TEXT",this.components=[]}e.prototype.getInputType=function(){return this.textInputType},e.prototype.setInputType=function(t){this.textInputType=t},e.prototype.getComponents=function(e){return e&&e instanceof t.TextInkRange?this.components.slice(e.getStartComponent(),e.getEndComponent()+1):this.components},e.prototype.setComponents=function(t){this.components=t},t.TextInputUnit=e}(MyScript),function(t){function e(e){t.AbstractParameter.call(this,e),this.textProperties=new t.TextProperties}e.prototype=new t.AbstractParameter,e.prototype.constructor=e,e.prototype.getLanguage=function(){return this.language},e.prototype.setLanguage=function(t){this.language=t},e.prototype.getInputMode=function(){return this.textInputMode},e.prototype.setInputMode=function(t){this.textInputMode=t},e.prototype.getContentTypes=function(){return this.contentTypes},e.prototype.setContentTypes=function(t){this.contentTypes=t},e.prototype.getSubsetKnowledges=function(){return this.subsetKnowledges},e.prototype.setSubsetKnowledges=function(t){this.subsetKnowledges=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},e.prototype.getUserLkWords=function(){return this.userLkWords},e.prototype.setUserLkWords=function(t){this.userLkWords=t},e.prototype.getResultDetail=function(){return this.resultDetail},e.prototype.setResultDetail=function(t){this.resultDetail=t},e.prototype.getTextProperties=function(){return this.textProperties},e.prototype.setTextProperties=function(t){this.textProperties=t},t.TextParameter=e}(MyScript),function(t){function e(){}e.prototype.getTextCandidateListSize=function(){return this.textCandidateListSize},e.prototype.setTextCandidateListSize=function(t){this.textCandidateListSize=t},e.prototype.getWordCandidateListSize=function(){return this.wordCandidateListSize},e.prototype.setWordCandidateListSize=function(t){this.wordCandidateListSize=t},e.prototype.getWordPredictionListSize=function(){return this.wordPredictionListSize},e.prototype.setWordPredictionListSize=function(t){this.wordPredictionListSize=t},e.prototype.getWordCompletionListSize=function(){return this.wordCompletionListSize},e.prototype.setWordCompletionListSize=function(t){this.wordCompletionListSize=t},e.prototype.getCharacterCandidateListSize=function(){return this.characterCandidateListSize},e.prototype.setCharacterCandidateListSize=function(t){this.characterCandidateListSize=t},e.prototype.getDiscardCaseVariations=function(){return this.discardCaseVariations},e.prototype.setDiscardCaseVariations=function(t){this.discardCaseVariations=t},e.prototype.getDiscardAccentuationVariations=function(){return this.discardAccentuationVariations},e.prototype.setDiscardAccentuationVariations=function(t){this.discardAccentuationVariations=t},e.prototype.getDisableSpatialOrdering=function(){return this.disableSpatialOrdering},e.prototype.setDisableSpatialOrdering=function(t){this.disableSpatialOrdering=t},e.prototype.getGlyphDistortion=function(){return this.glyphDistortion},e.prototype.setGlyphDistortion=function(t){this.glyphDistortion=t},e.prototype.getEnableOutOfLexicon=function(){return this.enableOutOfLexicon},e.prototype.setEnableOutOfLexicon=function(t){this.enableOutOfLexicon=t},e.prototype.getSpellingDistortion=function(){return this.spellingDistortion},e.prototype.setSpellingDistortion=function(t){this.spellingDistortion=t},t.TextProperties=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionInput,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.textParameter},e.prototype.setParameters=function(t){this.textParameter=t},e.prototype.getInputUnits=function(e){return e&&e instanceof t.TextInkRange?this.inputUnits.slice(e.getStartUnit(),e.getEndUnit()+1):this.inputUnits},e.prototype.setInputUnits=function(t){this.inputUnits=t},t.TextRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getTextRecognitionInput=function(){return this.textInput},e.prototype.setTextRecognitionInput=function(t){this.textInput=JSON.stringify(t)},t.TextRecognitionData=e}(MyScript),function(t){function e(e){t.AbstractStartRequestWSMessage.call(this,e)}e.prototype=new t.AbstractStartRequestWSMessage,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.textParameter},e.prototype.setParameters=function(t){this.textParameter=t},e.prototype.getInputUnits=function(){return this.inputUnits},e.prototype.setInputUnits=function(t){this.inputUnits=t},t.TextStartRequestWSMessage=e}(MyScript),function(t){function e(e){t.AbstractContinueRequestWSMessage.call(this,e)}e.prototype=new t.AbstractContinueRequestWSMessage,e.prototype.constructor=e,e.prototype.getInputUnits=function(){return this.inputUnits},e.prototype.setInputUnits=function(t){this.inputUnits=t},t.TextContinueRequestWSMessage=e}(MyScript),function(t){function e(e){t.AbstractParameter.call(this,e)}e.prototype=new t.AbstractParameter,e.prototype.constructor=e,e.prototype.getRejectDetectionSensitivity=function(){return this.rejectDetectionSensitivity},e.prototype.setRejectDetectionSensitivity=function(t){this.rejectDetectionSensitivity=t},e.prototype.hasBeautification=function(){return this.doBeautification},e.prototype.setBeautification=function(t){this.doBeautification=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},t.ShapeParameter=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionInput,e.prototype.constructor=e,e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},e.prototype.getDoBeautification=function(){return this.doBeautification},e.prototype.setDoBeautification=function(t){this.doBeautification=t},e.prototype.getRejectDetectionSensitivity=function(){return this.rejectDetectionSensitivity},e.prototype.setRejectDetectionSensitivity=function(t){this.rejectDetectionSensitivity=t},t.ShapeRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getShapeRecognitionInput=function(){return this.shapeInput},e.prototype.setShapeRecognitionInput=function(t){this.shapeInput=JSON.stringify(t)},t.ShapeRecognitionData=e}(MyScript),function(t){function e(e){t.AbstractParameter.call(this,e),this.resultTypes=[],this.userResources=[]}e.prototype=new t.AbstractParameter,e.prototype.constructor=e,e.prototype.getResultTypes=function(){return this.resultTypes},e.prototype.setResultTypes=function(t){this.resultTypes=t},e.prototype.isColumnar=function(){return this.columnarOperation},e.prototype.setColumnar=function(t){this.columnarOperation=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},e.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},e.prototype.setScratchOutDetectionSensitivity=function(t){this.scratchOutDetectionSensitivity=t},t.MathParameter=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionInput,e.prototype.constructor=e,e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},e.prototype.getResultTypes=function(){return this.resultTypes},e.prototype.setResultTypes=function(t){this.resultTypes=t},e.prototype.isColumnar=function(){return this.columnarOperation},e.prototype.setColumnar=function(t){this.columnarOperation=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},e.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},e.prototype.setScratchOutDetectionSensitivity=function(t){this.scratchOutDetectionSensitivity=t},t.MathRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getMathRecognitionInput=function(){return this.mathInput},e.prototype.setMathRecognitionInput=function(t){this.mathInput=JSON.stringify(t)},t.MathRecognitionData=e}(MyScript),function(t){function e(e){t.AbstractStartRequestWSMessage.call(this,e)}e.prototype=new t.AbstractStartRequestWSMessage,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},t.MathStartRequestWSMessage=e}(MyScript),function(t){function e(e){this.type="continue",t.AbstractContinueRequestWSMessage.call(this,e)}e.prototype=new t.AbstractContinueRequestWSMessage,e.prototype.constructor=e,e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},t.MathContinueRequestWSMessage=e}(MyScript),function(t){function e(){t.AbstractComponent.call(this)}e.prototype=new t.AbstractComponent,e.prototype.constructor=e,e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setBoundingBox=function(t){this.boundingBox=t},t.AbstractMusicInputComponent=e}(MyScript),function(t){function e(){this.type="accidental"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicAccidentalInputComponent=e}(MyScript),function(t){function e(){this.type="arpeggiate"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicArpeggiateInputComponent=e}(MyScript),function(t){function e(){this.type="bar",this.value=new t.MusicBar}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicBarInputComponent=e}(MyScript),function(t){function e(){this.type="beam",this.value=new t.MusicBeam}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicBeamInputComponent=e}(MyScript),function(t){function e(){this.type="clef",this.value=new t.MusicClef}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicClefInputComponent=e}(MyScript),function(t){function e(){this.type="decoration",this.value=new t.MusicDecoration}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicDecorationInputComponent=e}(MyScript),function(t){function e(){this.type="dots"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicDotsInputComponent=e}(MyScript),function(t){function e(){this.type="head"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicHeadInputComponent=e}(MyScript),function(t){function e(){this.type="ledgerLine"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,t.MusicLedgerLineInputComponent=e}(MyScript),function(t){function e(){this.type="rest"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicRestInputComponent=e}(MyScript),function(t){function e(){this.type="stem"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicStemInputComponent=e}(MyScript),function(t){function e(){this.type="tieOrSlur"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicTieOrSlurInputComponent=e}(MyScript),function(t){function e(){this.type="timeSignature"}e.prototype=new t.AbstractMusicInputComponent,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=t},t.MusicTimeSignatureInputComponent=e}(MyScript),function(t){function e(){this.count=5,this.gap=20}e.prototype.getCount=function(){return this.count},e.prototype.setCount=function(t){this.count=t},e.prototype.getTop=function(){return this.top},e.prototype.setTop=function(t){this.top=t},e.prototype.getGap=function(){return this.gap},e.prototype.setGap=function(t){this.gap=t},t.MusicStaff=e}(MyScript),function(t){function e(e){t.AbstractParameter.call(this,e),this.resultTypes=[],this.userResources=[]}e.prototype=new t.AbstractParameter,e.prototype.constructor=e,e.prototype.getResultTypes=function(){return this.resultTypes},e.prototype.setResultTypes=function(t){this.resultTypes=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},e.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},e.prototype.setScratchOutDetectionSensitivity=function(t){this.scratchOutDetectionSensitivity=t},e.prototype.getStaff=function(){return this.staff},e.prototype.setStaff=function(t){this.staff=t},e.prototype.getDivisions=function(){return this.divisions},e.prototype.setDivisions=function(t){this.divisions=t},t.MusicParameter=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionInput,e.prototype.constructor=e,e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},e.prototype.getResultTypes=function(){return this.resultTypes},e.prototype.setResultTypes=function(t){this.resultTypes=t},e.prototype.getUserResources=function(){return this.userResources},e.prototype.setUserResources=function(t){this.userResources=t},e.prototype.getScratchOutDetectionSensitivity=function(){return this.scratchOutDetectionSensitivity},e.prototype.setScratchOutDetectionSensitivity=function(t){this.scratchOutDetectionSensitivity=t},e.prototype.getStaff=function(){return this.staff},e.prototype.setStaff=function(t){this.staff=t},e.prototype.getDivisions=function(){return this.divisions},e.prototype.setDivisions=function(t){this.divisions=t},t.MusicRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getMusicRecognitionInput=function(){return this.musicInput},e.prototype.setMusicRecognitionInput=function(t){this.musicInput=JSON.stringify(t)},t.MusicRecognitionData=e}(MyScript),function(t){function e(e){t.AbstractParameter.call(this,e),this.textParameter=new t.TextParameter,this.textParameter.setLanguage("en_US"),this.textParameter.setInputMode("CURSIVE")}e.prototype=new t.AbstractParameter,e.prototype.constructor=e,e.prototype.getTextParameters=function(){return this.textParameter},e.prototype.setTextParameters=function(t){this.textParameter=t},e.prototype.getCoordinateResolution=function(){return this.coordinateResolution},e.prototype.setCoordinateResolution=function(t){this.coordinateResolution=t},t.AnalyzerParameter=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionInput,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameter},e.prototype.setParameters=function(t){this.parameter=t},e.prototype.getComponents=function(){return this.components},e.prototype.setComponents=function(t){this.components=t},t.AnalyzerRecognitionInput=e}(MyScript),function(t){function e(){}e.prototype=new t.AbstractRecognitionData,e.prototype.constructor=e,e.prototype.getAnalyzerRecognitionInput=function(){return this.analyzerInput},e.prototype.setAnalyzerRecognitionInput=function(t){this.analyzerInput=JSON.stringify(t)},t.AnalyzerRecognitionData=e}(MyScript),function(t){function e(t){t&&(this.instanceId=t.instanceId)}e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getDocument=function(){return this.result},t.AbstractResult=e}(MyScript),function(t){function e(e){t.AbstractWSMessage.call(this,e),e&&(this.instanceId=e.instanceId)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getDocument=function(){return this.result},t.AbstractRecoResponseWSMessage=e}(MyScript),function(t){function e(e){
t.AbstractWSMessage.call(this,e),e&&(this.challenge=e.challenge)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getChallenge=function(){return this.challenge},t.ChallengeResponseWSMessage=e}(MyScript),function(t){function e(e){t.AbstractWSMessage.call(this,e),e&&(this.error=e.error)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,e.prototype.getError=function(){return this.error},t.ErrorResponseWSMessage=e}(MyScript),function(t){function e(e){t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,t.InitResponseWSMessage=e}(MyScript),function(t){function e(e){t.AbstractWSMessage.call(this,e)}e.prototype=new t.AbstractWSMessage,e.prototype.constructor=e,t.ResetResponseWSMessage=e}(MyScript),function(t){function e(t){if(t){var e=t.split(/[:-]+/);this.startUnit=Number(e[0]),this.startComponent=Number(e[1]),this.startPoint=Number(e[2]),this.endUnit=Number(e[3]),this.endComponent=Number(e[4]),this.endPoint=Number(e[5])}}e.prototype.getStartUnit=function(){return this.startUnit},e.prototype.getEndUnit=function(){return this.endUnit},e.prototype.getStartComponent=function(){return this.startComponent},e.prototype.getEndComponent=function(){return this.endComponent},e.prototype.getStartPoint=function(){return this.startPoint},e.prototype.getEndPoint=function(){return this.endPoint},t.TextInkRange=e}(MyScript),function(t){function e(e){if(this.flags=[],this.children=[],e){this.label=e.label,this.normalizedScore=e.normalizedScore,this.spellingDistortionRatio=e.spellingDistortionRatio;for(var n in e.flags)this.flags.push(e.flags[n]);for(var o in e.children)this.children.push(new t.TextSegment(e.children[o]))}}e.prototype.getLabel=function(){return this.label},e.prototype.getNormalizedScore=function(){return this.normalizedScore},e.prototype.getResemblanceScore=function(){return this.resemblanceScore},e.prototype.getSpellingDistortionRatio=function(){return this.spellingDistortionRatio},e.prototype.getFlags=function(){return this.flags},e.prototype.getChildren=function(){return this.children},t.TextCandidate=e}(MyScript),function(t){function e(e){if(this.tagItems=[],this.wordCandidates=[],this.charCandidates=[],e){e.textSegmentResult&&(this.textSegmentResult=new t.TextSegment(e.textSegmentResult));for(var n in e.tagItems)this.tagItems.push(new t.TextTagItem(e.tagItems[n]));for(var o in e.wordCandidates)this.wordCandidates.push(new t.TextSegment(e.wordCandidates[o]));for(var i in e.charCandidates)this.charCandidates.push(new t.TextSegment(e.charCandidates[i]))}}e.prototype.getTagItems=function(){return this.tagItems},e.prototype.getWordSegments=function(){return this.wordCandidates},e.prototype.getWordSegment=function(t){for(var e=0;e<this.getWordSegments().length;e++)if(JSON.stringify(this.getWordSegments()[e].getInkRanges())===JSON.stringify(t))return this.getWordSegments()[e]},e.prototype.getCharSegments=function(){return this.charCandidates},e.prototype.getCharSegment=function(t){for(var e=0;e<this.getCharSegments().length;e++)if(JSON.stringify(this.getCharSegments()[e].getInkRanges())===JSON.stringify(t))return this.getCharSegments()[e]},e.prototype.getTextSegment=function(){return this.textSegmentResult},e.prototype.hasScratchOutResults=function(){return!1},t.TextDocument=e}(MyScript),function(t){function e(e){t.AbstractResult.call(this,e),e&&(this.result=new t.TextDocument(e.result))}e.prototype=new t.AbstractResult,e.prototype.constructor=e,e.prototype.getTextDocument=function(){return this.result},t.TextResult=e}(MyScript),function(t){function e(e){if(this.candidates=[],this.inkRanges=[],e){if(this.selectedCandidateIdx=e.selectedCandidateIdx,e.inkRanges){var n=e.inkRanges.split(/[\s]+/);for(var o in n)this.inkRanges.push(new t.TextInkRange(n[o]))}for(var i in e.candidates)this.candidates.push(new t.TextCandidate(e.candidates[i]))}}e.prototype.getCandidates=function(){return this.candidates},e.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidateIdx},e.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},e.prototype.getInkRanges=function(){return this.inkRanges},t.TextSegment=e}(MyScript),function(t){function e(e){if(this.inkRanges=[],e&&(this.tagType=e.tagType,e.inkRanges)){var n=e.inkRanges.split(/[\s]+/);for(var o in n)this.inkRanges.push(new t.TextInkRange(n[o]))}}e.prototype.getTagType=function(){return this.tagType},e.prototype.getInkRanges=function(){return this.inkRanges},t.TextTagItem=e}(MyScript),function(t){function e(e){t.AbstractRecoResponseWSMessage.call(this,e),e&&(this.result=new t.TextDocument(e.result))}e.prototype=new t.AbstractRecoResponseWSMessage,e.prototype.constructor=e,e.prototype.getTextDocument=function(){return this.result},t.TextResponseWSMessage=e}(MyScript),function(t){function e(t){t&&(this.type=t.type,this.beginDecoration=t.beginDecoration,this.beginTangentAngle=t.beginTangentAngle,this.endDecoration=t.endDecoration,this.endTangentAngle=t.endTangentAngle)}e.prototype.getType=function(){return this.type},e.prototype.isLine=function(){return"line"===this.type},e.prototype.isEllipse=function(){return"ellipse"===this.type},e.prototype.hasBeginDecoration=function(){return"undefined"!=typeof this.beginDecoration},e.prototype.hasEndDecoration=function(){return"undefined"!=typeof this.endDecoration},e.prototype.getBeginDecoration=function(){return this.beginDecoration},e.prototype.getEndDecoration=function(){return this.endDecoration},e.prototype.getBeginTangentAngle=function(){return this.beginTangentAngle},e.prototype.getEndTangentAngle=function(){return this.endTangentAngle},t.AbstractShapePrimitive=e}(MyScript),function(t){function e(t){t&&(this.type=t.type)}e.prototype.getType=function(){return this.type},e.prototype.isErased=function(){return"erased"===this.type},e.prototype.isScratchOut=function(){return"scratchOut"===this.type},e.prototype.isNotRecognized=function(){return"notRecognized"===this.type},e.prototype.isRecognized=function(){return"recognizedShape"===this.type},t.ShapeCandidate=e}(MyScript),function(t){function e(e){if(this.segments=[],e)for(var n in e.segments)this.segments.push(new t.ShapeSegment(e.segments[n]))}e.prototype.getSegments=function(){return this.segments},e.prototype.hasScratchOutResults=function(){for(var e in this.getSegments()){var n=this.getSegments()[e];for(var o in n.getCandidates()){var i=n.getCandidates()[o];if(i instanceof t.ShapeScratchOut)return!0}}return!1},t.ShapeDocument=e}(MyScript),function(t){function e(e){t.AbstractShapePrimitive.call(this,e),e&&(this.center=new t.Point(e.center),this.minRadius=e.minRadius,this.maxRadius=e.maxRadius,this.orientation=e.orientation,this.startAngle=e.startAngle,this.sweepAngle=e.sweepAngle)}e.prototype=new t.AbstractShapePrimitive,e.prototype.constructor=e,e.prototype.getCenter=function(){return this.center},e.prototype.getMinRadius=function(){return this.minRadius},e.prototype.getMaxRadius=function(){return this.maxRadius},e.prototype.getOrientation=function(){return this.orientation},e.prototype.getStartAngle=function(){return this.startAngle},e.prototype.getSweepAngle=function(){return this.sweepAngle},t.ShapeEllipse=e}(MyScript),function(t){function e(e){t.ShapeCandidate.call(this,e)}e.prototype=new t.ShapeCandidate,e.prototype.constructor=e,t.ShapeErased=e}(MyScript),function(t){function e(t){t&&(this.firstStroke=t.firstStroke,this.lastStroke=t.lastStroke,this.firstPoint=t.firstPoint,this.lastPoint=t.lastPoint)}e.prototype.getFirstStroke=function(){return this.firstStroke},e.prototype.getLastStroke=function(){return this.lastStroke},e.prototype.getFirstPoint=function(){return this.firstPoint},e.prototype.getLastPoint=function(){return this.lastPoint},t.ShapeInkRange=e}(MyScript),function(t){function e(e){t.AbstractShapePrimitive.call(this,e),e&&(this.firstPoint=new t.Point(e.firstPoint),this.lastPoint=new t.Point(e.lastPoint))}e.prototype=new t.AbstractShapePrimitive,e.prototype.constructor=e,e.prototype.getFirstPoint=function(){return this.firstPoint},e.prototype.getLastPoint=function(){return this.lastPoint},t.ShapeLine=e}(MyScript),function(t){function e(e){t.ShapeCandidate.call(this,e)}e.prototype=new t.ShapeCandidate,e.prototype.constructor=e,t.ShapeNotRecognized=e}(MyScript),function(t){function e(e){if(t.ShapeCandidate.call(this,e),this.primitives=[],e){this.label=e.label,this.normalizedRecognitionScore=e.normalizedRecognitionScore,this.resemblanceScore=e.resemblanceScore;for(var n in e.primitives)switch(e.primitives[n].type){case"line":this.primitives.push(new t.ShapeLine(e.primitives[n]));break;case"ellipse":this.primitives.push(new t.ShapeEllipse(e.primitives[n]));break;default:throw new Error("Unknown shape primitive")}}}e.prototype=new t.ShapeCandidate,e.prototype.constructor=e,e.prototype.getPrimitives=function(){return this.primitives},e.prototype.getLabel=function(){return this.label},e.prototype.getNormalizedRecognitionScore=function(){return this.normalizedRecognitionScore},e.prototype.getResemblanceScore=function(){return this.resemblanceScore},t.ShapeRecognized=e}(MyScript),function(t){function e(e){t.AbstractResult.call(this,e),e&&(this.result=new t.ShapeDocument(e.result))}e.prototype=new t.AbstractResult,e.prototype.constructor=e,e.prototype.getShapeDocument=function(){return this.result},t.ShapeResult=e}(MyScript),function(t){function e(e){if(t.ShapeCandidate.call(this,e),this.inkRanges=[],e)for(var n in e.inkRanges)this.inkRanges.push(new t.ShapeInkRange(e.inkRanges[n]))}e.prototype=new t.ShapeCandidate,e.prototype.constructor=e,e.prototype.getInkRanges=function(){return this.inkRanges},t.ShapeScratchOut=e}(MyScript),function(t){function e(e){if(this.inkRanges=[],this.candidates=[],e){this.elementType=e.elementType,this.uniqueID=e.uniqueID,this.selectedCandidateIndex=e.selectedCandidateIndex;for(var n in e.candidates)switch(e.candidates[n].type){case"erased":this.candidates.push(new t.ShapeErased(e.candidates[n]));break;case"scratchOut":this.candidates.push(new t.ShapeScratchOut(e.candidates[n]));break;case"recognizedShape":this.candidates.push(new t.ShapeRecognized(e.candidates[n]));break;default:this.candidates.push(new t.ShapeNotRecognized(e.candidates[n]))}for(var o in e.inkRanges)this.inkRanges.push(new t.ShapeInkRange(e.inkRanges[o]))}}e.prototype.getElementType=function(){return this.elementType},e.prototype.getUniqueId=function(){return this.uniqueID},e.prototype.getInkRanges=function(){return this.inkRanges},e.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidateIndex},e.prototype.getCandidates=function(){return this.candidates},e.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},t.ShapeSegment=e}(MyScript),function(t){function e(t){t&&(this.name=t.name,this.type=t.type)}e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},t.MathNode=e}(MyScript),function(t){function e(e){if(t.MathNode.call(this,e),this.candidates=[],e){this.selectedCandidate=e.selectedCandidate;for(var n in e.candidates)switch(e.candidates[n].type){case"nonTerminalNode":this.candidates.push(new t.MathNonTerminalNode(e.candidates[n]));break;case"terminalNode":this.candidates.push(new t.MathTerminalNode(e.candidates[n]));break;case"rule":this.candidates.push(new t.MathRuleNode(e.candidates[n]));break;case"cell":this.candidates.push(new t.MathCellNonTerminalNode(e.candidates[n]));break;case"border":this.candidates.push(new t.MathBorderNonTerminalNode(e.candidates[n]));break;case"table":this.candidates.push(new t.MathTableRuleNode(e.candidates[n]));break;default:throw new Error("Unknown math node type: "+e.candidates[n].type)}}}e.prototype=new t.MathNode,e.prototype.constructor=e,e.prototype.getCandidates=function(){return this.candidates},e.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidate},e.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},e.prototype.getInkRanges=function(){if(this.getSelectedCandidate())return this.getSelectedCandidate().getInkRanges();throw new Error("No selected candidate")},t.MathNonTerminalNode=e}(MyScript),function(t){function e(t){t&&(this.type=t.type)}e.prototype.getType=function(){return this.type},e.prototype.isLaTex=function(){return"LATEX"===this.type},e.prototype.isMathMl=function(){return"MATHML"===this.type},e.prototype.isSymbolTree=function(){return"SYMBOLTREE"===this.type},t.MathResultElement=e}(MyScript),function(t){function e(e){if(t.MathNode.call(this,e),this.children=[],e){this.name=e.name;for(var n in e.children)switch(e.children[n].type){case"nonTerminalNode":this.children.push(new t.MathNonTerminalNode(e.children[n]));break;case"terminalNode":this.children.push(new t.MathTerminalNode(e.children[n]));break;case"rule":this.children.push(new t.MathRuleNode(e.children[n]));break;case"cell":this.children.push(new t.MathCellNonTerminalNode(e.children[n]));break;case"border":this.children.push(new t.MathBorderNonTerminalNode(e.children[n]));break;case"table":this.children.push(new t.MathTableRuleNode(e.children[n]));break;default:throw new Error("Unknown math node type: "+e.children[n].type)}}}e.prototype=new t.MathNode,e.prototype.constructor=e,e.prototype.getName=function(){return this.name},e.prototype.getChildren=function(){return this.children},e.prototype.getInkRanges=function(){var t=[];for(var e in this.getChildren()){var n=this.getChildren()[e].getInkRanges();for(var o in n)t.push(n[o])}return t},t.MathRuleNode=e}(MyScript),function(t){function e(e){if(this.results=[],this.scratchOutResults=[],e){for(var n in e.results){var o=e.results[n];switch(o.type){case"MATHML":this.results.push(new t.MathMathMLResultElement(o));break;case"LATEX":this.results.push(new t.MathLaTexResultElement(o));break;case"SYMBOLTREE":this.results.push(new t.MathSymbolTreeResultElement(o));break;default:throw new Error("Unknown math result type: "+o.type)}}for(var i in e.scratchOutResults)this.scratchOutResults.push(new t.MathScratchOut(e.scratchOutResults[i]))}}e.prototype.getResultElements=function(){return this.results},e.prototype.getScratchOutResults=function(){return this.scratchOutResults},e.prototype.hasScratchOutResults=function(){return this.getScratchOutResults()&&this.getScratchOutResults().length>0?!0:!1},t.MathDocument=e}(MyScript),function(t){function e(t){t&&(this.component=t.component,this.firstItem=t.firstItem,this.lastItem=t.lastItem)}e.prototype.getComponent=function(){return this.component},e.prototype.getFirstItem=function(){return this.firstItem},e.prototype.getLastItem=function(){return this.lastItem},t.MathInkRange=e}(MyScript),function(t){function e(e){t.MathResultElement.call(this,e),e&&(this.value=e.value)}e.prototype=new t.MathResultElement,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},t.MathLaTexResultElement=e}(MyScript),function(t){function e(e){t.MathResultElement.call(this,e),e&&(this.value=e.value)}e.prototype=new t.MathResultElement,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},t.MathMathMLResultElement=e}(MyScript),function(t){function e(e){t.AbstractResult.call(this,e),e&&(this.result=new t.MathDocument(e.result))}e.prototype=new t.AbstractResult,e.prototype.constructor=e,e.prototype.getMathDocument=function(){return this.result},t.MathResult=e}(MyScript),function(t){function e(e){if(this.inkRanges=[],this.erasedInkRanges=[],e){for(var n in e.inkRanges)this.inkRanges.push(new t.MathInkRange(e.inkRanges[n]));for(var o in e.erasedInkRanges)this.erasedInkRanges.push(new t.MathInkRange(e.erasedInkRanges[o]))}}e.prototype.getInkRanges=function(){return this.inkRanges},e.prototype.getErasedInkRanges=function(){return this.erasedInkRanges},t.MathScratchOut=e}(MyScript),function(t){function e(e){if(t.MathResultElement.call(this,e),e){if(!e.root)throw new Error("Missing root");switch(e.root.type){case"nonTerminalNode":this.root=new t.MathNonTerminalNode(e.root);break;case"terminalNode":this.root=new t.MathTerminalNode(e.root);break;case"rule":this.root=new t.MathRuleNode(e.root);break;case"cell":this.root=new t.MathCellNonTerminalNode(e.root);break;case"border":this.root=new t.MathBorderNonTerminalNode(e.root);break;case"table":this.root=new t.MathTableRuleNode(e.root);break;default:throw new Error("Unknown math node type: "+e.root.type)}this.value=JSON.stringify(e.root,null,"  ")}}e.prototype=new t.MathResultElement,e.prototype.constructor=e,e.prototype.getRoot=function(){return this.root},e.prototype.getInkRanges=function(){if(this.getRoot())return this.getRoot().getInkRanges();throw new Error("No selected candidate")},e.prototype.getValue=function(){return this.value},t.MathSymbolTreeResultElement=e}(MyScript),function(t){function e(e){if(t.MathNode.call(this,e),this.candidates=[],this.inkRanges=[],e){this.selectedCandidate=e.selectedCandidate;for(var n in e.candidates)this.candidates.push(new t.MathTerminalNodeCandidate(e.candidates[n]));for(var o in e.inkRanges)this.inkRanges.push(new t.MathInkRange(e.inkRanges[o]))}}e.prototype=new t.MathNode,e.prototype.constructor=e,e.prototype.getCandidates=function(){return this.candidates},e.prototype.getInkRanges=function(){return this.inkRanges},e.prototype.getSelectedCandidateIdx=function(){return this.selectedCandidate},e.prototype.getSelectedCandidate=function(){return this.getCandidates().length>0&&void 0!==this.getSelectedCandidateIdx()?this.getCandidates()[this.getSelectedCandidateIdx()]:void 0},t.MathTerminalNode=e}(MyScript),function(t){function e(t){t&&(this.label=t.label,this.normalizedRecognitionScore=t.normalizedRecognitionScore)}e.prototype.getLabel=function(){return this.label},e.prototype.getNormalizedRecognitionScore=function(){return this.normalizedRecognitionScore},t.MathTerminalNodeCandidate=e}(MyScript),function(t){function e(t){t&&(this.position=t.position,this.start=t.start,this.stop=t.stop,this.type=t.type)}e.prototype.getPosition=function(){return this.position},e.prototype.getStart=function(){return this.start},e.prototype.getStop=function(){return this.stop},e.prototype.getType=function(){return this.type},t.MathBorderData=e}(MyScript),function(t){function e(e){t.MathNonTerminalNode.call(this,e),e&&(this.data=new t.MathBorderData(e.data))}e.prototype=new t.MathNonTerminalNode,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},t.MathBorderNonTerminalNode=e}(MyScript),function(t){function e(t){t&&(this.columnStart=t.columnStart,this.columnStop=t.columnStop,this.rowStart=t.rowStart,this.rowStop=t.rowStop)}e.prototype.getColumnStart=function(){return this.columnStart},e.prototype.getColumnStop=function(){return this.columnStop},e.prototype.getRowStart=function(){return this.rowStart},e.prototype.getRowStop=function(){return this.rowStop},t.MathCellData=e}(MyScript),function(t){function e(e){t.MathNonTerminalNode.call(this,e),e&&(this.data=new t.MathCellData(e.data))}e.prototype=new t.MathNonTerminalNode,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},t.MathCellNonTerminalNode=e}(MyScript),function(t){function e(t){t&&(this.columnCount=t.columnCount,this.rowCount=t.rowCount)}e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getRowCount=function(){return this.rowCount},t.MathTableData=e}(MyScript),function(t){function e(e){t.MathRuleNode.call(this,e),e&&(this.data=new t.MathTableData(e.data))}e.prototype=new t.MathRuleNode,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},t.MathTableRuleNode=e}(MyScript),function(t){function e(e){t.AbstractRecoResponseWSMessage.call(this,e),e&&(this.result=new t.MathDocument(e.result))}e.prototype=new t.AbstractRecoResponseWSMessage,e.prototype.constructor=e,e.prototype.getMathDocument=function(){return this.result},t.MathResponseWSMessage=e}(MyScript),function(t){function e(t){t&&(this.inputRanges=[],this.elementType=t.elementType,this.inputRanges=t.inputRanges)}e.prototype.getElementType=function(){return this.elementType},e.prototype.getInputRanges=function(){return this.inputRanges},t.MusicElement=e}(MyScript),function(t){function e(t){t&&(this.type=t.type)}e.prototype.getType=function(){return this.type},e.prototype.isMusicXML=function(){return"MUSICXML"===this.type},e.prototype.isScoreTree=function(){return"SCORETREE"===this.type},t.MusicResultElement=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},t.MusicAccidental=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.label=e.label)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getLabel=function(){return this.label},t.MusicAnnotation=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},t.MusicArpeggiate=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),this.decorations=[],e){this.repeatDirection=e.repeatDirection,this.style=e.style;for(var n in e.decorations)this.decorations.push(new t.MusicDecoration(e.decorations[n]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getRepeatDirection=function(){return this.repeatDirection},e.prototype.setRepeatDirection=function(t){this.repeatDirection=t},e.prototype.getStyle=function(){return this.style},e.prototype.setStyle=function(t){this.style=t},e.prototype.getDecorations=function(){return this.decorations},e.prototype.setDecorations=function(t){this.decorations=t},t.MusicBar=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.gap=e.gap,this.slope=e.slope,this.placement=e.placement,this.leftCount=e.leftCount,this.rightCount=e.rightCount)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getGap=function(){return this.gap},e.prototype.setGap=function(t){this.gap=t},e.prototype.getSlope=function(){return this.slope},e.prototype.setSlope=function(t){this.slope=t},e.prototype.getPlacement=function(){return this.placement},e.prototype.setPlacement=function(t){this.placement=t},e.prototype.getLeftCount=function(){return this.leftCount},e.prototype.setLeftCount=function(t){this.leftCount=t},e.prototype.getRightCount=function(){return this.rightCount},e.prototype.setRightCount=function(t){this.rightCount=t},t.MusicBeam=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),this.decorations=[],this.notes=[],this.beamTypes=[],this.ledgerLines=[],this.startSlurs=[],this.stopSlurs=[],e){this.duration=e.duration,this.arpeggiate=new t.MusicArpeggiate(e.arpeggiate),this.startBeam=new t.MusicBeam(e.startBeam),this.stopBeam=new t.MusicBeam(e.stopBeam),this.stem=new t.MusicStem(e.stem);for(var n in e.decorations)this.decorations.push(new t.MusicDecoration(e.decorations[n]));for(var o in e.notes)this.notes.push(new t.MusicNote(e.notes[o]));for(var i in e.beamTypes)this.beamTypes.push(e.beamTypes[i]);for(var r in e.ledgerLines)this.ledgerLines.push(new t.MusicLedgerLine(e.ledgerLines[r]));for(var s in e.startSlurs)this.startSlurs.push(new t.MusicSlur(e.startSlurs[s]));for(var a in e.stopSlurs)this.stopSlurs.push(new t.MusicSlur(e.stopSlurs[a]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getDuration=function(){return this.duration},e.prototype.getArpeggiate=function(){return this.arpeggiate},e.prototype.getStartBeam=function(){return this.startBeam},e.prototype.getStopBeam=function(){return this.stopBeam},e.prototype.getStem=function(){return this.stem},e.prototype.getDecorations=function(){return this.decorations},e.prototype.getNotes=function(){return this.notes},e.prototype.getBeamTypes=function(){return this.beamTypes},e.prototype.getLedgerLines=function(){return this.ledgerLines},e.prototype.getStartSlurs=function(){return this.startSlurs},e.prototype.getStopSlurs=function(){return this.stopSlurs},t.MusicChord=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),this.symbol="G",this.octave=0,e&&(this.line=e.line,this.yAnchor=e.yAnchor,this.octave=e.octave,this.symbol=e.symbol)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getYAnchor=function(){return this.yAnchor},e.prototype.setYAnchor=function(t){this.yAnchor=t},e.prototype.getLine=function(){return this.line},e.prototype.setLine=function(t){this.line=t},e.prototype.getOctave=function(){return this.octave},e.prototype.setOctave=function(t){this.octave=t},e.prototype.getSymbol=function(){return this.symbol},e.prototype.setSymbol=function(t){this.symbol=t},t.MusicClef=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.symbol=e.symbol,this.placement=e.placement)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getSymbol=function(){return this.symbol},e.prototype.setSymbol=function(t){this.symbol=t},e.prototype.getPlacement=function(){return this.placement},e.prototype.setPlacement=function(t){this.placement=t},t.MusicDecoration=e}(MyScript),function(t){function e(e){if(this.results=[],this.scratchOutResults=[],e){for(var n in e.results)switch(e.results[n].type){case"MUSICXML":this.results.push(new t.MusicXMLResultElement(e.results[n]));break;default:this.results.push(new t.MusicScoreTreeResultElement(e.results[n]))}for(var o in e.scratchOutResults)this.scratchOutResults.push(new t.MusicScratchOut(e.scratchOutResults[o]))}}e.prototype.getResultElements=function(){return this.results},e.prototype.getScratchOutResults=function(){return this.scratchOutResults},e.prototype.hasScratchOutResults=function(){return this.getScratchOutResults()&&this.getScratchOutResults().length>0?!0:!1},t.MusicDocument=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.count=e.count)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getCount=function(){return this.count},t.MusicDots=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},t.MusicHead=e}(MyScript),function(t){function e(t){t&&(this.component=t.component,this.firstItem=t.firstItem,this.lastItem=t.lastItem)}e.prototype.getComponent=function(){return this.component},e.prototype.getFirstItem=function(){return this.firstItem},e.prototype.getLastItem=function(){return this.lastItem},t.MusicInputRange=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),this.accidentals=[],e){this.signature=new t.MusicKeySignatureData(e.signature);for(var n in e.accidentals)this.accidentals.push(new t.MusicAccidental(e.accidentals[n]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getSignature=function(){return this.signature},e.prototype.getAccidentals=function(){return this.accidentals},t.MusicKeySignature=e}(MyScript),function(t){function e(t){t&&(this.fifths=t.fifths,this.cancel=t.cancel)}e.prototype.getFifths=function(){return this.fifths},e.prototype.getCancel=function(){return this.cancel},t.MusicKeySignatureData=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e)}e.prototype=new t.MusicElement,e.prototype.constructor=e,t.MusicLedgerLine=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),this.decorations=[],this.beamTypes=[],this.ledgerLines=[],this.startSlurs=[],this.stopSlurs=[],e){this.accidental=new t.MusicAccidental(e.accidental),this.dots=new t.MusicDots(e.dots),this.duration=e.duration,this.head=new t.MusicHead(e.head),this.line=e.line,this.pitch=new t.MusicPitchData(e.pitch),this.startBeam=new t.MusicBeam(e.startBeam),this.stopBeam=new t.MusicBeam(e.stopBeam),this.stem=new t.MusicStem(e.stem),this.startTie=new t.MusicTie(e.startTie),this.stopTie=new t.MusicTie(e.stopTie),this.startTuplet=new t.MusicTuplet(e.startTuplet),this.stopTuplet=new t.MusicTuplet(e.stopTuplet),this.timeModification=new t.MusicTimeModificationData(e.timeModification),this.type=e.type;for(var n in e.decorations)this.decorations.push(new t.MusicDecoration(e.decorations[n]));for(var o in e.beamTypes)this.beamTypes.push(e.beamTypes[o]);for(var i in e.ledgerLines)this.ledgerLines.push(new t.MusicLedgerLine(e.ledgerLines[i]));for(var r in e.startSlurs)this.startSlurs.push(new t.MusicSlur(e.startSlurs[r]));for(var s in e.stopSlurs)this.stopSlurs.push(new t.MusicSlur(e.stopSlurs[s]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getAccidental=function(){return this.accidental},e.prototype.getDots=function(){return this.dots},e.prototype.getDuration=function(){return this.duration},e.prototype.getHead=function(){return this.head},e.prototype.getLine=function(){return this.line},e.prototype.getPitch=function(){return this.pitch},e.prototype.getStartBeam=function(){return this.startBeam},e.prototype.getStopBeam=function(){return this.stopBeam},e.prototype.getStem=function(){return this.stem},e.prototype.getStartTie=function(){return this.startTie},e.prototype.getStopTie=function(){return this.stopTie},e.prototype.getStartTuplet=function(){return this.startTuplet},e.prototype.getStopTuplet=function(){return this.stopTuplet},e.prototype.getTimeModification=function(){return this.timeModification},e.prototype.getType=function(){return this.type},e.prototype.getDecorations=function(){return this.decorations},e.prototype.getBeamTypes=function(){return this.beamTypes},e.prototype.getLedgerLines=function(){return this.ledgerLines},e.prototype.getStartSlurs=function(){return this.startSlurs},e.prototype.getStopSlurs=function(){return this.stopSlurs},t.MusicNote=e}(MyScript),function(t){function e(e){if(this.elements=[],e)for(var n in e.elements)switch(e.elements[n].elementType){case"accidental":this.elements.push(new t.MusicAccidental(e.elements[n]));break;case"annotation":this.elements.push(new t.MusicAnnotation(e.elements[n]));break;case"arpeggiate":this.elements.push(new t.MusicArpeggiate(e.elements[n]));break;case"bar":this.elements.push(new t.MusicBar(e.elements[n]));break;case"beam":this.elements.push(new t.MusicBeam(e.elements[n]));break;case"chord":this.elements.push(new t.MusicChord(e.elements[n]));break;case"clef":this.elements.push(new t.MusicClef(e.elements[n]));break;case"decoration":this.elements.push(new t.MusicDecoration(e.elements[n]));break;case"dots":this.elements.push(new t.MusicDots(e.elements[n]));break;case"head":this.elements.push(new t.MusicHead(e.elements[n]));break;case"keySignature":this.elements.push(new t.MusicKeySignature(e.elements[n]));break;case"ledgerLine":this.elements.push(new t.MusicLedgerLine(e.elements[n]));break;case"note":this.elements.push(new t.MusicNote(e.elements[n]));break;case"rest":this.elements.push(new t.MusicRest(e.elements[n]));break;case"slur":this.elements.push(new t.MusicSlur(e.elements[n]));break;case"stem":this.elements.push(new t.MusicStem(e.elements[n]));break;case"tie":this.elements.push(new t.MusicTie(e.elements[n]));break;case"timeSignature":this.elements.push(new t.MusicTimeSignature(e.elements[n]));break;case"tuplet":this.elements.push(new t.MusicTuplet(e.elements[n]));break;case"tupletBracket":this.elements.push(new t.MusicTupletBracket(e.elements[n]));break;default:throw new Error("Unknown music element")}}e.prototype.getElements=function(){return this.elements},t.MusicPart=e}(MyScript),function(t){function e(t){t&&(this.alteration=t.alteration,this.octave=t.octave,this.step=t.step)}e.prototype.getAlteration=function(){return this.alteration},e.prototype.getOctave=function(){return this.octave},e.prototype.getStep=function(){return this.step},t.MusicPitchData=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),
this.decorations=[],this.startSlurs=[],this.stopSlurs=[],e){this.type=e.type,this.dots=new t.MusicDots(e.dots),this.startTuplet=new t.MusicTuplet(e.startTuplet),this.stopTuplet=new t.MusicTuplet(e.stopTuplet),this.timeModification=new t.MusicTimeModificationData(e.timeModification),this.duration=e.duration;for(var n in e.decorations)this.decorations.push(new t.MusicDecoration(e.decorations[n]));for(var o in e.startSlurs)this.startSlurs.push(new t.MusicSlur(e.startSlurs[o]));for(var i in e.stopSlurs)this.stopSlurs.push(new t.MusicSlur(e.stopSlurs[i]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getDots=function(){return this.dots},e.prototype.getStartTuplet=function(){return this.startTuplet},e.prototype.getStopTuplet=function(){return this.stopTuplet},e.prototype.getTimeModification=function(){return this.timeModification},e.prototype.getDuration=function(){return this.duration},e.prototype.getDecorations=function(){return this.decorations},e.prototype.getStartSlurs=function(){return this.startSlurs},e.prototype.getStopSlurs=function(){return this.stopSlurs},t.MusicRest=e}(MyScript),function(t){function e(e){t.AbstractResult.call(this,e),e&&(this.result=new t.MusicDocument(e.result))}e.prototype=new t.AbstractResult,e.prototype.constructor=e,e.prototype.getMusicDocument=function(){return this.result},t.MusicResult=e}(MyScript),function(t){function e(e){if(this.parts=[],e)for(var n in e.parts)this.parts.push(new t.MusicPart(e.parts[n]))}e.prototype.getParts=function(){return this.parts},t.MusicScore=e}(MyScript),function(t){function e(e){t.MusicResultElement.call(this,e),e&&(this.score=new t.MusicScore(e.score))}e.prototype=new t.MusicResultElement,e.prototype.constructor=e,e.prototype.getScore=function(){return this.score},t.MusicScoreTreeResultElement=e}(MyScript),function(t){function e(e){if(this.inputRanges=[],this.erasedInputRanges=[],e){for(var n in e.inputRanges)this.inputRanges.push(new t.MusicInputRange(e.inputRanges[n]));for(var o in e.erasedInputRanges)this.erasedInputRanges.push(new t.MusicInputRange(e.erasedInputRanges[o]))}}e.prototype.getInputRanges=function(){return this.inputRanges},e.prototype.getErasedInputRanges=function(){return this.erasedInputRanges},t.MusicScratchOut=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.placement=e.placement)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getPlacement=function(){return this.placement},t.MusicSlur=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},t.MusicStem=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.placement=e.placement)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getPlacement=function(){return this.placement},t.MusicTie=e}(MyScript),function(t){function e(t){t&&(this.actual=t.actual,this.dots=t.dots,this.normal=t.normal,this.type=t.type)}e.prototype.getActual=function(){return this.actual},e.prototype.getDots=function(){return this.dots},e.prototype.getNormal=function(){return this.normal},e.prototype.getType=function(){return this.type},t.MusicTimeModificationData=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.top=new t.MusicAnnotation(e.top),this.bottom=new t.MusicAnnotation(e.bottom),this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.getType=function(){return this.type},t.MusicTimeSignature=e}(MyScript),function(t){function e(e){t.MusicElement.call(this,e),e&&(this.type=e.type)}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getType=function(){return this.type},t.MusicTupletBracket=e}(MyScript),function(t){function e(e){if(t.MusicElement.call(this,e),this.brackets=[],e){this.placement=e.placement,this.number=new t.MusicAnnotation(e.number);for(var n in e.brackets)this.brackets.push(new t.MusicTupletBracket(e.brackets[n]))}}e.prototype=new t.MusicElement,e.prototype.constructor=e,e.prototype.getPlacement=function(){return this.placement},e.prototype.getNumber=function(){return this.number},e.prototype.getBrackets=function(){return this.brackets},t.MusicTuplet=e}(MyScript),function(t){function e(e){t.MusicResultElement.call(this,e),e&&(this.value=e.value)}e.prototype=new t.MusicResultElement,e.prototype.constructor=e,e.prototype.getValue=function(){return this.value},t.MusicXMLResultElement=e}(MyScript),function(t){function e(t){t&&(this.elementType=t.elementType)}e.prototype.getElementType=function(){return this.elementType},t.AnalyzerElement=e}(MyScript),function(t){function e(e){t.AnalyzerElement.call(this,e),e&&(this.data=new t.AnalyzerCellData(e.data))}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},t.AnalyzerCell=e}(MyScript),function(t){function e(e){e&&(this.firstColumn=e.firstColumn,this.lastColumn=e.lastColumn,this.firstRow=e.firstRow,this.lastRow=e.lastRow,this.height=e.height,this.width=e.width,this.orientation=e.orientation,this.topLeftPoint=new t.Point(e.topLeftPoint),this.topBorder=e.topBorder,this.bottomBorder=e.bottomBorder,this.leftBorder=e.leftBorder,this.rightBorder=e.rightBorder)}e.prototype.getFirstColumn=function(){return this.firstColumn},e.prototype.getLastColumn=function(){return this.lastColumn},e.prototype.getFirstRow=function(){return this.firstRow},e.prototype.getLastRow=function(){return this.lastRow},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.getOrientation=function(){return this.orientation},e.prototype.getTopLeftPoint=function(){return this.topLeftPoint},e.prototype.hasTopBorder=function(){return this.topBorder},e.prototype.hasBottomBorder=function(){return this.bottomBorder},e.prototype.hasLeftBorder=function(){return this.leftBorder},e.prototype.hasRightBorder=function(){return this.rightBorder},e.prototype.getBoundingBox=function(){var e=new t.Rectangle;return e.setTopLeftPoint(this.getTopLeftPoint()),e.setWidth(this.getWidth()),e.setHeight(this.getHeight()),e},t.AnalyzerCellData=e}(MyScript),function(t){function e(e){if(t.AnalyzerElement.call(this,e),this.textLines=[],this.shapes=[],this.tables=[],this.groups=[],e){for(var n in e.textLines)this.textLines.push(new t.AnalyzerTextLine(e.textLines[n]));for(var o in e.shapes)this.shapes.push(new t.ShapeSegment(e.shapes[o]));for(var i in e.tables)this.tables.push(new t.AnalyzerTable(e.tables[i]));for(var r in e.groups)this.groups.push(new t.AnalyzerGroup(e.groups[r]))}}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getTextLines=function(){return this.textLines},e.prototype.getShapes=function(){return this.shapes},e.prototype.getTables=function(){return this.tables},e.prototype.getGroups=function(){return this.groups},e.prototype.hasScratchOutResults=function(){for(var e in this.getShapes()){var n=this.getShapes()[e];for(var o in n.getCandidates()){var i=n.getCandidates()[o];if(i instanceof t.ShapeScratchOut)return!0}}return!1},t.AnalyzerDocument=e}(MyScript),function(t){function e(t){t&&(this.uniqueID=t.uniqueID,this.type=t.type)}e.prototype.getUniqueId=function(){return this.uniqueID},e.prototype.getType=function(){return this.type},t.AnalyzerElementReference=e}(MyScript),function(t){function e(e){if(t.AnalyzerElement.call(this,e),this.elementReferences=[],e){this.type=e.type,this.uniqueID=e.uniqueID;for(var n in e.elementReferences)this.elementReferences.push(new t.AnalyzerElementReference(e.elementReferences[n]))}}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getElementReferences=function(){return this.elementReferences},e.prototype.getType=function(){return this.type},e.prototype.getUniqueId=function(){return this.uniqueID},t.AnalyzerGroup=e}(MyScript),function(t){function e(e){e&&(this.firstPoint=new t.Point(e.firstPoint),this.lastPoint=new t.Point(e.lastPoint),this.stroke=new t.AnalyzerRecognizedStroke(e.stroke))}e.prototype.getFirstPoint=function(){return this.firstPoint},e.prototype.getLastPoint=function(){return this.lastPoint},e.prototype.getStroke=function(){return this.stroke},t.AnalyzerInkRange=e}(MyScript),function(t){function e(e){t.AnalyzerElement.call(this,e),e&&(this.data=new t.AnalyzerLineData(e.data))}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},t.AnalyzerLine=e}(MyScript),function(t){function e(e){e&&(this.p1=new t.Point(e.p1),this.p2=new t.Point(e.p2))}e.prototype.getP1=function(){return this.p1},e.prototype.getP2=function(){return this.p2},t.AnalyzerLineData=e}(MyScript),function(t){function e(t){t&&(this.type=t.type,this.x=t.x,this.y=t.y)}e.prototype.getType=function(){return this.type},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},t.AnalyzerRecognizedStroke=e}(MyScript),function(t){function e(e){t.AbstractResult.call(this,e),e&&(this.result=new t.AnalyzerDocument(e.result))}e.prototype=new t.AbstractResult,e.prototype.constructor=e,e.prototype.getAnalyzerDocument=function(){return this.result},t.AnalyzerResult=e}(MyScript),function(t){function e(e){e&&(this.inkRange=new t.AnalyzerInkRange(e.inkRange),this.type=e.type)}e.prototype.getInkRange=function(){return this.inkRange},e.prototype.getType=function(){return this.type},t.AnalyzerStrokeType=e}(MyScript),function(t){function e(e){if(t.AnalyzerElement.call(this,e),this.lines=[],this.cells=[],this.inkRanges=[],e){this.data=new t.AnalyzerTableData(e.data);for(var n in e.lines)this.lines.push(new t.AnalyzerLine(e.lines[n]));for(var o in e.cells)this.cells.push(new t.AnalyzerCell(e.cells[o]));for(var i in e.inkRanges)this.inkRanges.push(new t.AnalyzerInkRange(e.inkRanges[i]))}}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},e.prototype.getLines=function(){return this.lines},e.prototype.getCells=function(){return this.cells},e.prototype.getInkRanges=function(){return this.inkRanges},t.AnalyzerTable=e}(MyScript),function(t){function e(t){t&&(this.columnCount=t.columnCount,this.rowCount=t.rowCount)}e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getRowCount=function(){return this.rowCount},t.AnalyzerTableData=e}(MyScript),function(t){function e(e){if(t.AnalyzerElement.call(this,e),this.inkRanges=[],this.underlineList=[],e){this.data=new t.AnalyzerTextLineData(e.data),this.result=new t.TextDocument(e.result);for(var n in e.inkRanges)this.inkRanges.push(new t.AnalyzerInkRange(e.inkRanges[n]));for(var o in e.underlineList)this.underlineList.push(new t.AnalyzerUnderline(e.underlineList[o]))}}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},e.prototype.getTextDocument=function(){return this.result},e.prototype.getInkRanges=function(){return this.inkRanges},e.prototype.getUnderlineList=function(){return this.underlineList},t.AnalyzerTextLine=e}(MyScript),function(t){function e(e){e&&(this.baselinePos=e.baselinePos,this.toMidline=e.toMidline,this.orientation=e.orientation,this.topLeftPoint=new t.Point(e.topLeftPoint),this.textHeight=e.textHeight,this.justificationType=e.justificationType,this.height=e.height,this.width=e.width)}e.prototype.getBaselinePos=function(){return this.baselinePos},e.prototype.getToMidline=function(){return this.toMidline},e.prototype.getOrientation=function(){return this.orientation},e.prototype.getTopLeftPoint=function(){return this.topLeftPoint},e.prototype.getTextHeight=function(){return this.textHeight},e.prototype.getJustificationType=function(){return this.justificationType},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.getBoundingBox=function(){var e=new t.Rectangle;return(this.getTopLeftPoint()||this.getWidth()||this.getHeight())&&(e.setTopLeftPoint(this.getTopLeftPoint()),e.setWidth(this.getWidth()),e.setHeight(this.getHeight())),e},t.AnalyzerTextLineData=e}(MyScript),function(t){function e(e){if(t.AnalyzerElement.call(this,e),this.inkRanges=[],e){this.data=new t.AnalyzerUnderlineData(e.data);for(var n in e.inkRanges)this.inkRanges.push(new t.AnalyzerInkRange(e.inkRanges[n]))}}e.prototype=new t.AnalyzerElement,e.prototype.constructor=e,e.prototype.getData=function(){return this.data},e.prototype.getInkRanges=function(){return this.inkRanges},t.AnalyzerUnderline=e}(MyScript),function(t){function e(t){t&&(this.firstCharacter=t.firstCharacter,this.lastCharacter=t.lastCharacter)}e.prototype.getFirstCharacter=function(){return this.firstCharacter},e.prototype.getLastCharacter=function(){return this.lastCharacter},t.AnalyzerUnderlineData=e}(MyScript),function(t,e){function n(){}n.parse=function(t){var e;try{e=JSON.parse(t.responseText)}catch(n){e=t.responseText}return e},n.transformRequest=function(t){var e=[];for(var n in t)"undefined"!=typeof t[n]&&"function"!=typeof t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},n.prototype.xhr=function(t,o,i){function r(){4===u.readyState&&u.status>=200&&u.status<300&&p.resolve(n.parse(u))}function s(){u.status>=200&&u.status<300?p.resolve(n.parse(u)):p.reject(new Error(u.responseText))}function a(){p.reject(new Error("Can't XHR "+o))}function c(t){p.notify(t.loaded/t.total)}var p=e.defer(),u=new XMLHttpRequest;return u.open(t,o,!0),u.withCredentials=!0,u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),u.onload=s,u.onerror=a,u.onprogress=c,u.onreadystatechange=r,u.send(n.transformRequest(i)),p.promise},n.prototype.get=function(t,e){return e&&(t+="?"+n.transformRequest(e)),this.xhr("GET",t).then(function(t){return t},function(t){throw t})},n.prototype.put=function(t,e){return this.xhr("PUT",t,e).then(function(t){return t},function(t){throw t})},n.prototype.post=function(t,e){return this.xhr("POST",t,e).then(function(t){return t},function(t){throw t})},n.prototype["delete"]=function(t,e){return this.xhr("DELETE",t,e).then(function(t){return t},function(t){throw t})},t.NetworkInterface=n}(MyScript,Q),function(t,e){function n(t,e){this._url=t,this._callback=e}n.prototype.send=function(t){this._socket&&this._socket.send(JSON.stringify(t))},n.prototype.isClosed=function(){return this._socket?3===this._socket.readyState:!1},n.prototype.isClosing=function(){return this._socket?2===this._socket.readyState:!1},n.prototype.isOpen=function(){return this._socket?1===this._socket.readyState:!1},n.prototype.isConnecting=function(){return this._socket?0===this._socket.readyState:!1},n.prototype.close=function(t,e){this._socket&&this._socket.close(t,e)},n.prototype.open=function(){var t=this;this._socket=new WebSocket(this._url),this._socket.onopen=function(e){t._callback(e)},this._socket.onclose=function(e){t._callback(e)},this._socket.onerror=function(e){t._callback(e)},this._socket.onmessage=function(e){t._callback({type:e.type,data:JSON.parse(e.data)})}},t.NetworkWSInterface=n}(MyScript,Q),function(t,e){function n(e){this.host="cloud.myscript.com",e&&this.setHost(e),this.http=new t.NetworkInterface}n.prototype.getHost=function(){return this.host},n.prototype.setHost=function(t){void 0!==t&&(this.host=t)},n.prototype.getAvailableLanguageList=function(e,n){var o=new t.RecognitionLanguagesData;return o.setApplicationKey(e),o.setInputMode(n),this.http.get("https://"+this.host+"/api/v3.0/recognition/rest/text/languages.json",o).then(function(t){return t.result},function(t){return t})},n.prototype.computeHmac=function(t,n,o){var i="object"==typeof n?JSON.stringify(n):n;return e.HmacSHA512(i,t+o).toString(e.enc.Hex)},t.AbstractRecognizer=n}(MyScript,CryptoJS),function(t){function e(e){t.AbstractRecognizer.call(this,e)}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype._init=function(e,n){this._wsInterface=new t.NetworkWSInterface(e,n)},e.prototype.isClosed=function(){return this._wsInterface.isClosed()},e.prototype.isClosing=function(){return this._wsInterface.isClosing()},e.prototype.isOpen=function(){return this._wsInterface.isOpen()},e.prototype.isConnecting=function(){return this._wsInterface.isConnecting()},e.prototype.open=function(){this._wsInterface.open()},e.prototype.close=function(){this._wsInterface.close()},e.prototype.sendMessage=function(t){this._wsInterface.send(t)},e.prototype.initWSRecognition=function(e){var n=new t.InitRequestWSMessage;n.setApplicationKey(e),this.sendMessage(n)},e.prototype.takeUpHmacChallenge=function(e,n,o){var i=new t.ChallengeRequestWSMessage;i.setApplicationKey(e),i.setChallenge(n),o&&i.setHmacSignature(this.computeHmac(e,n,o)),this.sendMessage(i)},e.prototype.resetWSRecognition=function(){var e=new t.ResetRequestWSMessage;this.sendMessage(e)},t.AbstractWSRecognizer=e}(MyScript),function(t){function e(e){t.AbstractRecognizer.call(this,e),this.parameters=new t.TextParameter,this.parameters.setLanguage("en_US"),this.parameters.setInputMode("CURSIVE")}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.doSimpleRecognition=function(e,n,o,i,r){var s=new t.TextRecognitionInput,a=this.getParameters();r&&(a=r),s.setParameters(a),s.setInputUnits(o);var c=new t.TextRecognitionData;return c.setApplicationKey(e),c.setTextRecognitionInput(s),c.setInstanceId(n),i&&c.setHmac(this.computeHmac(e,s,i)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/text/doSimpleRecognition.json",c).then(function(e){return new t.TextResult(e)},function(t){throw t})},t.TextRecognizer=e}(MyScript),function(t){function e(e,n){t.AbstractWSRecognizer.call(this,n),this._endpoint="wss://"+this.getHost()+"/api/v3.0/recognition/ws/text",this.parameters=new t.TextParameter,this.parameters.setLanguage("en_US"),this.parameters.setInputMode("CURSIVE"),this._init(this._endpoint,function(n){switch(n.type){case"open":e(n);break;case"close":e(n);break;case"error":e(void 0,n);break;default:switch(n.data.type){case"init":n.data=new t.InitResponseWSMessage(n.data),e(n.data);break;case"reset":n.data=new t.ResetResponseWSMessage(n.data),e(n.data);break;case"error":n.data=new t.ErrorResponseWSMessage(n.data),e(void 0,n.data);break;case"hmacChallenge":n.data=new t.ChallengeResponseWSMessage(n.data),e(n.data);break;default:n.data=new t.TextResponseWSMessage(n.data),e(n.data)}}})}e.prototype=new t.AbstractWSRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.startWSRecognition=function(e,n){var o=new t.TextStartRequestWSMessage,i=this.getParameters();n&&(i=n),o.setParameters(i),o.setInputUnits(e),this.sendMessage(o)},e.prototype.continueWSRecognition=function(e,n){var o=new t.TextContinueRequestWSMessage;o.setInputUnits(e),o.setInstanceId(n),this.sendMessage(o)},t.TextWSRecognizer=e}(MyScript),function(t){function e(e){t.AbstractRecognizer.call(this,e),this.parameters=new t.ShapeParameter}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.doSimpleRecognition=function(e,n,o,i,r){var s=new t.ShapeRecognitionInput;s.setComponents(o);var a=this.getParameters();r&&(a=r),s.setDoBeautification(a.hasBeautification()),s.setRejectDetectionSensitivity(a.getRejectDetectionSensitivity());var c=new t.ShapeRecognitionData;return c.setApplicationKey(e),c.setShapeRecognitionInput(s),c.setInstanceId(n),i&&c.setHmac(this.computeHmac(e,s,i)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/shape/doSimpleRecognition.json",c).then(function(e){return new t.ShapeResult(e)},function(t){throw t})},e.prototype.clearShapeRecognitionSession=function(t,e){var n={instanceSessionId:e};return this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/shape/clearSessionId.json",n).then(function(t){return t},function(t){throw t})},t.ShapeRecognizer=e}(MyScript),function(t){function e(e){t.AbstractRecognizer.call(this,e),this.parameters=new t.MathParameter}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.doSimpleRecognition=function(e,n,o,i,r){var s=new t.MathRecognitionInput;s.setComponents(o);var a=this.getParameters();r&&(a=r),s.setResultTypes(a.getResultTypes()),s.setColumnar(a.isColumnar()),s.setScratchOutDetectionSensitivity(a.getScratchOutDetectionSensitivity()),s.setUserResources(a.getUserResources());var c=new t.MathRecognitionData;return c.setApplicationKey(e),c.setMathRecognitionInput(s),c.setInstanceId(n),i&&c.setHmac(this.computeHmac(e,s,i)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/math/doSimpleRecognition.json",c).then(function(e){return new t.MathResult(e)},function(t){throw t})},t.MathRecognizer=e}(MyScript),function(t){function e(e,n){t.AbstractWSRecognizer.call(this,n),this._endpoint="wss://"+this.getHost()+"/api/v3.0/recognition/ws/math",this.parameters=new t.MathParameter,this._init(this._endpoint,function(n){switch(n.type){case"open":e(n);break;case"close":e(n);break;case"error":e(void 0,n);break;default:switch(n.data.type){case"init":n.data=new t.InitResponseWSMessage(n.data),e(n.data);break;case"reset":n.data=new t.ResetResponseWSMessage(n.data),e(n.data);break;case"error":n.data=new t.ErrorResponseWSMessage(n.data),e(void 0,n.data);break;case"hmacChallenge":n.data=new t.ChallengeResponseWSMessage(n.data),e(n.data);break;default:n.data=new t.MathResponseWSMessage(n.data),e(n.data)}}})}e.prototype=new t.AbstractWSRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.startWSRecognition=function(e,n){var o=new t.MathStartRequestWSMessage,i=this.getParameters();n&&(i=n),o.setParameters(i),o.setComponents(e),this.sendMessage(o)},e.prototype.continueWSRecognition=function(e,n){var o=new t.MathContinueRequestWSMessage;o.setComponents(e),o.setInstanceId(n),this.sendMessage(o)},t.MathWSRecognizer=e}(MyScript),function(t){function e(e){t.AbstractRecognizer.call(this,e),this.parameters=new t.MusicParameter}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.doSimpleRecognition=function(e,n,o,i,r){var s=new t.MusicRecognitionInput;s.setComponents(o);var a=this.getParameters();r&&(a=r),s.setStaff(a.getStaff()),s.setDivisions(a.getDivisions()),s.setResultTypes(a.getResultTypes()),s.setScratchOutDetectionSensitivity(a.getScratchOutDetectionSensitivity()),s.setUserResources(a.getUserResources());var c=new t.MusicRecognitionData;return c.setApplicationKey(e),c.setMusicRecognitionInput(s),c.setInstanceId(n),i&&c.setHmac(this.computeHmac(e,s,i)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/music/doSimpleRecognition.json",c).then(function(e){return new t.MusicResult(e)},function(t){throw t})},t.MusicRecognizer=e}(MyScript),function(t){function e(e){t.AbstractRecognizer.call(this,e),this.parameters=new t.AnalyzerParameter}e.prototype=new t.AbstractRecognizer,e.prototype.constructor=e,e.prototype.getParameters=function(){return this.parameters},e.prototype.setParameters=function(t){this.parameters=t},e.prototype.doSimpleRecognition=function(e,n,o,i,r){var s=new t.AnalyzerRecognitionInput;s.setComponents(o);var a=this.getParameters();r&&(a=r),s.setParameters(a);var c=new t.AnalyzerRecognitionData;return c.setApplicationKey(e),c.setAnalyzerRecognitionInput(s),c.setInstanceId(n),i&&c.setHmac(this.computeHmac(e,s,i)),this.http.post("https://"+this.host+"/api/v3.0/recognition/rest/analyzer/doSimpleRecognition.json",c).then(function(e){return new t.AnalyzerResult(e)},function(t){return t})},t.AnalyzerRecognizer=e}(MyScript),function(t){function e(e){this.penParameters=new t.PenParameters,this.showBoundingBoxes=!1,this.typeset=!0,this.context=e,this.points=[],this.drawing=!1}function n(t,e,n){var o=t.p*n;return[{x:t.x-Math.sin(e)*o,y:t.y+Math.cos(e)*o},{x:t.x+Math.sin(e)*o,y:t.y-Math.cos(e)*o}]}function o(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2,p:(e.p+t.p)/2}}function i(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function r(t,e,n){void 0!==e&&(t.globalAlpha=n,t.fillStyle=e,t.fill())}function s(t,e){e.beginPath();var n=t.getLength(),i=t.getWidth(),s=t.getPointByIndex(0);if(3>n)e.arc(s.x,s.y,.6*i,0,2*Math.PI,!0);else{e.arc(s.x,s.y,i*s.p,0,2*Math.PI,!0),c(e,s,o(s,t.getPointByIndex(1)),i);for(var u=n-2,h=0;u>h;h++)p(e,o(t.getPointByIndex(h),t.getPointByIndex(h+1)),o(t.getPointByIndex(h+1),t.getPointByIndex(h+2)),t.getPointByIndex(h+1),i);c(e,o(t.getPointByIndex(n-2),t.getPointByIndex(n-1)),t.getPointByIndex(n-1),i),a(e,t.getPointByIndex(n-2),t.getPointByIndex(n-1),i)}e.closePath(),r(e,t.getColor(),t.getAlpha())}function a(t,e,o,r){var s=6,a=i(e,o),c=n(o,a,r);t.moveTo(c[0].x,c[0].y);for(var p=1;s>=p;p++){var u=a-p*Math.PI/s;t.lineTo(o.x-o.p*r*Math.sin(u),o.y+o.p*r*Math.cos(u))}}function c(t,e,o,r){var s=n(e,i(e,o),r),a=n(o,i(e,o),r);t.moveTo(s[0].x,s[0].y),t.lineTo(a[0].x,a[0].y),t.lineTo(a[1].x,a[1].y),t.lineTo(s[1].x,s[1].y)}function p(t,e,o,r,s){var a=n(e,i(e,r),s),c=n(o,i(r,o),s),p=n(r,i(e,o),s);t.moveTo(a[0].x,a[0].y),t.quadraticCurveTo(p[0].x,p[0].y,c[0].x,c[0].y),t.lineTo(c[1].x,c[1].y),t.quadraticCurveTo(p[1].x,p[1].y,a[1].x,a[1].y)}e.prototype.getContext=function(){return this.context},e.prototype._setContext=function(t){this.context=t},e.prototype.getShowBoundingBoxes=function(){return this.showBoundingBoxes},e.prototype.setShowBoundingBoxes=function(t){this.showBoundingBoxes=t},e.prototype.getParameters=function(){return this.penParameters},e.prototype.setParameters=function(t){this.penParameters=t},e.prototype.isTypesetting=function(){return this.typeset},e.prototype.setTypeset=function(t){this.typeset=t},e.prototype.clear=function(){this.getContext().clearRect(0,0,this.getContext().canvas.width,this.getContext().canvas.height)},e.prototype.drawRecognitionResult=function(t,e,n,o){throw new Error("not implemented")},e.prototype.drawComponents=function(t,e,n){throw new Error("not implemented")},e.prototype.drawComponent=function(e,n,o){if(e instanceof t.Stroke)this.drawStroke(e,n,o);else{if(!(e instanceof t.CharacterInputComponent))throw new Error("Component not implemented: "+e.getType());this.drawCharacter(e,n,o)}},e.prototype.drawRectangle=function(t,e,n){e&&this._setContext(e),n&&this.setParameters(n);var o=this.getParameters();this.getContext().save();try{this.getContext().fillStyle=o.getRectColor(),this.getContext().strokeStyle=o.getColor(),this.getContext().globalAlpha=o.getAlpha(),this.getContext().lineWidth=.5*o.getWidth(),this.getContext().fillRect(t.getX(),t.getY(),t.getWidth(),t.getHeight())}finally{this.getContext().restore()}},e.prototype.drawCharacter=function(t,e,n){throw new Error("not implemented")},e.prototype.drawStroke=function(e,n,o){if(n&&this._setContext(n),o&&this.setParameters(o),e&&e.getLength()>0)if(e instanceof t.StrokeComponent)s(e,this.getContext());else{this.drawStart(e.getX()[0],e.getY()[0]);for(var i=0;i<e.getLength();++i)this.drawContinue(e.getX()[i],e.getY()[i],n,o);this.drawEnd(e.getX()[e.getLength()-1],e.getY()[e.getLength()-1],n,o)}},e.prototype.drawStrokes=function(t,e,n){for(var o=0;o<t.length;o++)this.drawStroke(t[o],e,n)},e.prototype.drawStart=function(e,n,o,i){o&&this._setContext(o),i&&this.setParameters(i),this.points=[],this.drawing=!0,this.points.push(new t.QuadraticPoint({x:e,y:n}))},e.prototype.drawContinue=function(e,n,o,i){if(this.drawing){o&&this._setContext(o),i&&this.setParameters(i);var r=this.getParameters(),s=2+r.getWidth()/4,a=this.points[this.points.length-1];if(Math.abs(a.getX()-e)>=s||Math.abs(a.getY()-n)>=s)if(1===this.points.length){var c=this.points[this.points.length-1],p=new t.QuadraticPoint({x:e,y:n}),u=new t.QuadraticPoint({x:.5*(c.getX()+p.getX()),y:.5*(c.getY()+p.getY())});y(c,u,r.getPressureType()),y(u,p,r.getPressureType()),d(c,u,r.getWidth()),m(u,p,r.getWidth()),this.points.push(u),this.points.push(p),h(c,u,this.getContext(),r)}else{var u=this.points[this.points.length-2],p=this.points[this.points.length-1],l=new t.QuadraticPoint({x:e,y:n}),f=new t.QuadraticPoint({x:.5*(p.getX()+l.getX()),y:.5*(p.getY()+l.getY())});y(p,f,r.getPressureType()),y(f,l,r.getPressureType()),m(p,f,r.getWidth()),m(f,l,r.getWidth()),this.points.push(f),this.points.push(l),g(u,p,f,this.getContext(),r)}}},e.prototype.drawEnd=function(e,n,o,i){if(this.drawing){var r=this.getParameters();if(o&&this._setContext(o),i&&this.setParameters(i),1===this.points.length)u(new t.QuadraticPoint({x:e,y:n}),this.getContext(),r);else if(this.points.length>1){var s=this.points[this.points.length-1],a=new t.QuadraticPoint({x:e,y:n}),c=new t.QuadraticPoint({x:.5*(s.getX()+a.getX()),y:.5*(s.getY()+a.getY())});y(s,c,r.getPressureType()),y(c,a,r.getPressureType()),m(s,c,r.getWidth()),S(a,r.getWidth()),this.points.push(c),this.points.push(a),l(c,a,this.getContext(),r)}this.drawing=!1}};var u=function(t,e,n){e.save();try{e.fillStyle=n.getColor(),e.strokeStyle=n.getColor(),e.globalAlpha=n.getAlpha(),e.lineWidth=1,e.beginPath(),e.arc(t.getX(),t.getY(),.25*n.getWidth(),0,2*Math.PI),e.fill()}finally{e.restore()}},h=function(t,e,n,o){n.save();try{n.fillStyle=o.getColor(),n.strokeStyle=o.getColor(),n.globalAlpha=1,n.lineWidth=1,n.beginPath(),n.moveTo(t.getP1().getX(),t.getP1().getY()),n.lineTo(e.getP1().getX(),e.getP1().getY()),n.lineTo(e.getP2().getX(),e.getP2().getY()),n.lineTo(t.getP2().getX(),t.getP2().getY()),n.closePath(),n.fill()}finally{n.restore()}},g=function(t,e,n,o,i){o.save();try{o.fillStyle=i.getColor(),o.strokeStyle=i.getColor(),o.globalAlpha=1,o.lineWidth=1,o.beginPath(),o.moveTo(t.getP1().getX(),t.getP1().getY()),o.quadraticCurveTo(e.getP1().getX(),e.getP1().getY(),n.getP1().getX(),n.getP1().getY()),o.lineTo(n.getP2().getX(),n.getP2().getY()),o.quadraticCurveTo(e.getP2().getX(),e.getP2().getY(),t.getP2().getX(),t.getP2().getY()),o.closePath(),o.fill()}finally{o.restore()}},l=function(t,e,n,o){n.save();try{n.fillStyle=o.getColor(),n.strokeStyle=o.getColor(),n.globalAlpha=1,n.lineWidth=1,n.beginPath(),n.moveTo(t.getP1().getX(),t.getP1().getY()),n.lineTo(e.getP1().getX(),e.getP1().getY()),n.lineTo(e.getP2().getX(),e.getP2().getY()),n.lineTo(t.getP2().getX(),t.getP2().getY()),n.closePath(),n.fill()}finally{n.restore()}},y=function(t,e,n){var o=e.getX()-t.getX(),i=e.getY()-t.getY(),r=Math.sqrt(o*o+i*i);switch(0!==r&&(e.setDistance(r),e.setCos(o/r),e.setSin(i/r)),e.setLength(t.getLength()+e.getDistance()),n){case"SIMULATED":f(e);break;case"CONSTANT":e.setPressure(1);break;case"REAL":break;default:throw new Error("Unknown pressure type")}},f=function(t){var e,n;e=t.getDistance()<10?.2+Math.pow(.1*t.getDistance(),.4):t.getDistance()>t.getLength()-10?.2+Math.pow(.1*(t.getLength()-t.getDistance()),.4):1,n=e*Math.max(.1,1-.1*Math.sqrt(t.getDistance())),isNaN(parseFloat(n))&&(n=.5),t.setPressure(n)},d=function(t,e,n){var o=.5*(n*t.getPressure()),i=o*e.getSin(),r=o*e.getCos();t.getP1().setX(t.getX()-i),t.getP1().setY(t.getY()+r),t.getP2().setX(t.getX()+i),t.getP2().setY(t.getY()-r)},m=function(t,e,n){var o=t.getCos()+e.getCos(),i=t.getSin()+e.getSin(),r=Math.sqrt(o*o+i*i);if(0!==r){var s=.5*n*t.getPressure(),a=-s*i/r,c=s*o/r;t.getP1().setX(t.getX()+a),t.getP1().setY(t.getY()+c),t.getP2().setX(t.getX()-a),t.getP2().setY(t.getY()-c)}},S=function(t,e){var n=.5*e*t.getPressure(),o=-n*t.getSin(),i=n*t.getCos();t.getP1().setX(t.getX()+o),t.getP1().setY(t.getY()+i),t.getP2().setX(t.getX()-o),
t.getP2().setY(t.getY()-i)};t.AbstractRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e)}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.drawRecognitionResult=function(t,e,n,o){this.drawInputUnits(t,n,o)},e.prototype.drawInputUnits=function(t,e,n){for(var o in t)this.drawComponents(t[o].getComponents(),e,n)},e.prototype.drawComponents=function(e,n,o){for(var i in e){var r=e[i];if(r instanceof t.AbstractTextInputComponent)this.drawTextComponent(r,n,o);else{if(!(r instanceof t.AbstractComponent))throw new Error("not implemented");t.AbstractRenderer.prototype.drawComponent.call(this,r,n,o)}}},e.prototype.drawTextComponent=function(e,i,r){if(i&&this._setContext(i),r&&this.setParameters(r),e instanceof t.CharInputComponent)n(e,this.getContext(),this.getParameters());else{if(!(e instanceof t.StringInputComponent))throw new Error("Component not implemented: "+e.getType());o(e,this.getContext(),this.getParameters())}};var n=function(t,e,n){throw new Error("not implemented")},o=function(t,e,n){throw new Error("not implemented")};t.TextRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e)}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.drawRecognitionResult=function(t,e,n,o){this.isTypesetting()?this.drawShapes(t,e.getSegments(),n,o):this.drawComponents(t,n,o)},e.prototype.drawComponents=function(e,n,o){for(var i in e){var r=e[i];if(r instanceof t.AbstractShapePrimitive)this.drawShapePrimitive(r,n,o);else{if(!(r instanceof t.AbstractComponent))throw new Error("not implemented");t.AbstractRenderer.prototype.drawComponent.call(this,r,n,o)}}},e.prototype.drawShapes=function(t,e,n,o){for(var i in e)this.drawShapeSegment(t,e[i],n,o)},e.prototype.drawShapeSegment=function(e,n,o,i){var r=n.getSelectedCandidate();if(r instanceof t.ShapeRecognized)this.drawShapeRecognized(r,o,i);else{if(!(r instanceof t.ShapeNotRecognized))throw new Error("not implemented");this.drawShapeNotRecognized(e,n.getInkRanges(),o,i)}},e.prototype.drawShapeRecognized=function(t,e,n){this.drawComponents(t.getPrimitives(),e,n)},e.prototype.drawShapeNotRecognized=function(t,e,n,o){var i=[];for(var r in e)i.concat(this.extractStroke(t,e[r]));this.drawComponents(i,n,o)},e.prototype.drawShapePrimitive=function(e,n,o){if(e instanceof t.ShapeEllipse)this.drawShapeEllipse(e,n,o);else{if(!(e instanceof t.ShapeLine))throw new Error("Primitive not implemented: "+e.getType());this.drawShapeLine(e,n,o)}},e.prototype.drawShapeLine=function(t,e,n){e&&this._setContext(e),n&&this.setParameters(n),o(t.getFirstPoint(),t.getLastPoint(),this.getContext(),this.getParameters()),t.hasBeginDecoration()&&"ARROW_HEAD"===t.getBeginDecoration()&&r(t.getFirstPoint(),t.getBeginTangentAngle(),12,this.getContext(),this.getParameters()),t.hasEndDecoration()&&"ARROW_HEAD"===t.getEndDecoration()&&r(t.getLastPoint(),t.getEndTangentAngle(),12,this.getContext(),this.getParameters())},e.prototype.drawShapeEllipse=function(t,e,o){e&&this._setContext(e),o&&this.setParameters(o);var i=n(t.getCenter(),t.getMaxRadius(),t.getMinRadius(),t.getOrientation(),t.getStartAngle(),t.getSweepAngle(),this.getContext(),this.getParameters());t.hasBeginDecoration()&&"ARROW_HEAD"===t.getBeginDecoration()&&r(i[0],t.getBeginTangentAngle(),12,this.getContext(),this.getParameters()),t.hasEndDecoration()&&"ARROW_HEAD"===t.getEndDecoration()&&r(i[1],t.getEndTangentAngle(),12,this.getContext(),this.getParameters())};var n=function(e,n,o,i,r,s,a,c){var p=.02,u=Math.cos(i),h=Math.sin(i),g=u,l=h;u*=n,g*=o,h*=n,l*=o;var y=Math.floor(Math.abs(s)/p),f=[];a.save();try{a.fillStyle=c.getColor(),a.strokeStyle=c.getColor(),a.globalAlpha=c.getAlpha(),a.lineWidth=.5*c.getWidth(),a.beginPath();for(var d=0;y>=d;d++){var m=r+d/y*s,S=Math.atan2(Math.sin(m)/o,Math.cos(m)/n),R=Math.cos(S),w=Math.sin(S),M=e.x+u*R-l*w,C=e.y+g*w+h*R;0===d?a.moveTo(M,C):a.lineTo(M,C),(0===d||d===y)&&f.push(new t.Point({x:M,y:C}))}a.stroke()}finally{a.restore()}return f},o=function(t,e,n,o){n.save();try{n.fillStyle=o.getColor(),n.strokeStyle=o.getColor(),n.globalAlpha=o.getAlpha(),n.lineWidth=.5*o.getWidth(),n.beginPath(),n.moveTo(t.getX(),t.getY()),n.lineTo(e.getX(),e.getY()),n.stroke()}finally{n.restore()}},i=function(t){return t=(t+Math.PI)%(2*Math.PI)-Math.PI,t<-Math.PI&&(t+=2*Math.PI),t},r=function(t,e,n,o,r){var s=i(e+Math.PI-Math.PI/8),a=i(e-Math.PI+Math.PI/8);o.save();try{o.fillStyle=r.getColor(),o.strokeStyle=r.getColor(),o.globalAlpha=r.getAlpha(),o.lineWidth=.5*r.getWidth(),o.moveTo(t.getX(),t.getY()),o.beginPath(),o.lineTo(t.getX()+n*Math.cos(s),t.getY()+n*Math.sin(s)),o.lineTo(t.getX()+n*Math.cos(a),t.getY()+n*Math.sin(a)),o.lineTo(t.getX(),t.getY()),o.fill()}finally{o.restore()}};e.prototype.extractStroke=function(e,n){for(var o=[],i=Math.floor(n.getFirstPoint()),r=Math.ceil(n.getLastPoint()),s=n.getFirstStroke();s<=n.getLastStroke();s++){for(var a=e[s-1],c=a.getX().length,p=new t.Stroke,u=[],h=[],g=i;s===n.getLastStroke()&&r>=g&&c>g||s!==n.getLastStroke()&&c>g;g++)u.push(a.getX()[g]),h.push(a.getY()[g]);p.setX(u),p.setY(h),o.push(p)}return o},t.ShapeRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e)}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.drawRecognitionResult=function(t,e,n,o){var i=this.removeScratchOut(t,e.getScratchOutResults());this.drawComponents(i,n,o)},e.prototype.drawComponents=function(e,n,o){for(var i in e){var r=e[i];if(!(r instanceof t.AbstractComponent))throw new Error("not implemented");t.AbstractRenderer.prototype.drawComponent.call(this,r,n,o)}},e.prototype.removeScratchOut=function(t,e){if(!e||0===e.length)return t;var n=t.slice(0),o=[];for(var i in e){for(var r in e[i].getErasedInkRanges())o.push(e[i].getErasedInkRanges()[r].getComponent());for(var s in e[i].getInkRanges())o.push(e[i].getInkRanges()[s].getComponent())}o.sort(function(t,e){return e-t});for(var a in o)n.splice(o[a],1);return n},t.MathRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e)}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.drawRecognitionResult=function(t,e,n,o){var i=this.removeScratchOut(t,e.getScratchOutResults());this.drawComponents(i,n,o)},e.prototype.removeScratchOut=function(t,e){if(!e||0===e.length)return t;var n=t.slice(0),o=[];for(var i in e)if(e[i].getErasedInputRanges()){for(var r in e[i].getErasedInputRanges())o.push(e[i].getErasedInputRanges()[r].getComponent());for(var s in e[i].getInputRanges())o.push(e[i].getInputRanges()[s].getComponent())}o.sort(function(t,e){return e-t});for(var a in o)n.splice(o[a],1);return n},e.prototype.drawStaff=function(t,e,n){e&&this._setContext(e),n&&this.setParameters(n);var o=t.getTop()+(t.getCount()-1)*t.getGap(),i=1;this.getContext().beginPath();for(var r=0;i>r;r++)for(var s=o*r,a=0;a<t.getCount();a++)this.getContext().moveTo(0,t.getTop()+s+a*t.getGap()),this.getContext().lineTo(this.getContext().canvas.clientWidth,t.getTop()+s+a*t.getGap());this.getContext().stroke()},e.prototype.drawComponents=function(e,n,o){for(var i in e){var r=e[i];if(r instanceof t.AbstractMusicInputComponent)this.drawMusicNode(r,n,o);else{if(!(r instanceof t.AbstractComponent))throw new Error("not implemented");t.AbstractRenderer.prototype.drawComponent.call(this,r,n,o)}}},e.prototype.drawMusicNode=function(e,f,d){if(f&&this._setContext(f),d&&this.setParameters(d),e instanceof t.MusicAccidentalInputComponent)n(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicArpeggiateInputComponent)o(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicBarInputComponent)i(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicBeamInputComponent)r(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicClefInputComponent)s(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicDecorationInputComponent)a(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicDotsInputComponent)c(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicHeadInputComponent)p(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicLedgerLineInputComponent)u(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicRestInputComponent)h(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicStemInputComponent)g(e,this.getContext(),this.getParameters());else if(e instanceof t.MusicTieOrSlurInputComponent)l(e,this.getContext(),this.getParameters());else{if(!(e instanceof t.MusicTimeSignatureInputComponent))throw new Error("Node not implemented: "+e.getType());y(e,this.getContext(),this.getParameters())}};var n=function(t,e,n){throw new Error("not implemented")},o=function(t,e,n){throw new Error("not implemented")},i=function(t,e,n){throw new Error("not implemented")},r=function(t,e,n){throw new Error("not implemented")},s=function(t,e,n){var o="data:image/svg+xml,";switch(t.getValue().getSymbol()){case"F":o+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" x="0" y="0" width="18" height="20"><defs/><g transform="translate(6.600000e-3,3.125356e-3)"><g><path d="M17.3 3.1 C17.3 3.5 17.1 3.8 16.8 4.1 C16.5 4.4 15.9 4.5 15.5 4.3 C15 4.1 14.7 3.7 14.7 3.2 C14.6 2.8 14.8 2.5 15 2.2 C15.3 1.9 15.7 1.8 16 1.8 C16.4 1.8 16.8 2 17 2.3 C17.2 2.5 17.3 2.8 17.3 3.1 z"/></g><g><path d="M17.3 8.9 C17.3 9.3 17.1 9.7 16.8 9.9 C16.5 10.3 15.9 10.3 15.5 10.2 C15 10 14.7 9.5 14.7 9.1 C14.6 8.7 14.8 8.3 15 8 C15.3 7.8 15.7 7.6 16 7.6 C16.5 7.7 17 8 17.2 8.4 C17.2 8.6 17.3 8.8 17.3 8.9 z"/></g><g><path d="M13 7.2 C13 10 11.8 12.7 9.8 14.7 C7.3 17.2 4 18.8 0.7 19.8 C0.3 20.1 -0.4 19.8 0.3 19.4 C1.6 18.8 3 18.3 4.2 17.5 C7 15.8 9.3 13.1 9.8 9.9 C10.1 8 10.1 5.9 9.6 4 C9.2 2.6 8.2 1.1 6.7 0.9 C5.3 0.7 3.7 1.2 2.7 2.2 C2.5 2.4 2 3.2 2 4 C2.6 3.6 2.6 3.6 3.1 3.4 C4.2 2.9 5.7 3.6 6 4.9 C6.3 6 6.1 7.5 5 8.1 C3.8 8.7 2 8.5 1.4 7.2 C0.3 5.3 0.9 2.6 2.6 1.2 C4.4 -0.3 7.1 -0.3 9.2 0.4 C11.4 1.3 12.7 3.5 12.9 5.8 C13 6.2 13 6.7 13 7.2 z"/></g></g></svg>';break;case"C":o+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" width="18" height="25"><defs/><g><g transform="matrix(1,0,0,1.030698,-309.364,-543.8647)"><path d="M 325.9 546.8 C 325.8 548.7 324.7 550.7 322.8 551.5 C 321.1 552.1 319.1 552.2 317.6 551 C 316.6 550.2 316.2 548.4 317.3 547.5 C 318.3 546.5 320.4 547.4 320.3 548.9 C 320.7 549.9 318.5 550.5 319.7 551.3 C 321 551.6 322.3 550.5 322.6 549.3 C 323.1 547.5 323.1 545.6 322.7 543.8 C 322.4 542.9 321.9 541.5 320.7 541.9 C 319.2 542.2 318.3 543.8 317.9 545.1 C 317.6 543.2 316.4 541.5 315 540.2 C 315 544.1 315 548 315 551.9 L 314.1 551.9 C 314.1 543.9 314.1 535.7 314.1 527.7 L 315 527.7 C 315 531.5 315 535.5 315 539.4 C 316.4 538.1 317.6 536.4 317.8 534.5 C 318.3 535.9 319.3 537.5 321 537.8 C 322.2 537.8 322.5 536.3 322.8 535.4 C 323.1 533.7 323.1 531.8 322.6 530.1 C 322.2 529 320.9 528 319.6 528.3 C 318.6 529 320.6 529.6 320.3 530.6 C 320.5 532 318.8 533 317.6 532.3 C 316.3 531.6 316.4 529.7 317.4 528.8 C 318 528.1 319.3 527.7 320.3 527.7 C 321.2 527.7 321.8 527.7 322.6 528 C 324.6 528.7 325.7 530.7 325.9 532.7 C 326.2 534.9 324.9 537.3 322.8 538.2 C 321.5 538.7 319.9 538.3 318.8 537.3 C 318.7 538.3 318.2 539.2 317.7 539.9 C 318.1 540.6 318.6 541.8 318.8 542.1 C 320.1 540.9 322.5 540.8 323.8 542 C 325.2 543.1 326.1 545 325.9 546.8 z "/></g><g transform="matrix(1,0,0,1.030928,-309.364,-543.9805)"><path d="M 312.2 551.9 L 309.4 551.9 L 309.4 527.7 L 312.2 527.7 L 312.2 551.9 z "/></g></g></svg>';break;case"G":o+='<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" width="15" height="40"><defs/><path d="m 12 3.4 c 0.3 3.1 -2 5.6 -4.1 7.6 -0.9 0.9 -0.2 0.1 -0.6 0.6 -0.1 -0.5 -0.3 -1.7 -0.3 -2.1 0.1 -2.6 2.3 -6.5 4.2 -7.9 0.3 0.6 0.6 0.6 0.8 1.8 z m 0.7 15.9 c -1.2 -0.9 -2.8 -1.1 -4.3 -0.9 -0.2 -1.2 -0.4 -2.5 -0.6 -3.7 2.4 -2.3 4.9 -4.9 5 -8.4 0.1 -2.2 -0.3 -4.6 -1.7 -6.4 C 9.5 0.1 8.3 2.1 7.4 3.3 c -1.5 2.6 -1.1 5.8 -0.6 8.6 -0.8 0.9 -1.9 1.7 -2.7 2.7 -2.4 2.3 -4.4 5.3 -4 8.7 0.2 3.3 2.6 6.3 5.9 7.1 1.2 0.3 2.6 0.3 3.8 0.1 0.2 2.2 1 4.5 0.1 6.7 -0.7 1.6 -2.8 2.9 -4.3 2.2 -0.6 -0.3 -0.1 -0.1 -0.5 -0.2 1.1 -0.3 2 -1 2.3 -1.5 0.8 -1.4 -0.4 -3.6 -2.2 -3.3 -2.3 0 -3.2 3.1 -1.7 4.6 1.3 1.5 3.8 1.3 5.4 0.3 1.8 -1.2 2 -3.5 1.8 -5.5 -0.1 -0.7 -0.4 -2.6 -0.4 -3.3 0.7 -0.2 0.2 -0.1 1.2 -0.4 2.7 -1 4.4 -4.2 3.6 -7 -0.3 -1.4 -1 -2.9 -2.3 -3.7 z m 0.6 5.7 c 0.2 2 -1.1 4.2 -3.1 4.9 -0.1 -0.8 -0.2 -1 -0.3 -1.4 -0.5 -2.4 -0.7 -4.9 -1.1 -7.3 1.6 -0.2 3.5 0.5 4 2.1 0.2 0.6 0.3 1.2 0.4 1.8 z m -5.1 5.1 c -2.5 0.1 -5 -1.6 -5.6 -4 -0.7 -2.1 -0.5 -4.5 0.8 -6.4 1.1 -1.7 2.6 -3 4 -4.5 0.2 1.1 0.4 2.2 0.5 3.3 -3 0.8 -5 4.6 -3.2 7.3 0.5 0.8 2 2.2 2.8 1.6 -1.1 -0.7 -2 -1.8 -1.8 -3.2 -0.1 -1.3 1.4 -2.9 2.7 -3.1 0.4 2.8 0.9 6 1.4 8.8 -0.5 0.1 -1 0.1 -1.5 0.1 z"/></svg>';break;default:throw new Error("Unknown music clef symbol")}var i=new Image;i.onload=function(){var n=t.getBoundingBox().getHeight()/this.height;t.getBoundingBox().setWidth(this.width*n),e.drawImage(i,t.getBoundingBox().getX(),t.getBoundingBox().getY(),t.getBoundingBox().getWidth(),t.getBoundingBox().getHeight())},i.src=o},a=function(t,e,n){throw new Error("not implemented")},c=function(t,e,n){throw new Error("not implemented")},p=function(t,e,n){throw new Error("not implemented")},u=function(t,e,n){throw new Error("not implemented")},h=function(t,e,n){throw new Error("not implemented")},g=function(t,e,n){throw new Error("not implemented")},l=function(t,e,n){throw new Error("not implemented")},y=function(t,e,n){throw new Error("not implemented")};t.MusicRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e),this.shapeRenderer=new t.ShapeRenderer(e)}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.getShapeRenderer=function(){return this.shapeRenderer},e.prototype.setShapeRenderer=function(t){this.shapeRenderer=t},e.prototype.drawRecognitionResult=function(t,e,n,o){this.isTypesetting()?(this.shapeRenderer.drawShapes(t,e.getShapes(),n,o),this.drawTables(t,e.getTables(),n,o),this.drawTextLines(t,e.getTextLines(),n,o)):this.drawComponents(t,n,o)},e.prototype.drawComponents=function(e,n,o){for(var i in e){var r=e[i];if(r instanceof t.AbstractShapePrimitive)this.shapeRenderer.drawShapePrimitive(r,n,o);else{if(!(r instanceof t.AbstractComponent))throw new Error("not implemented");t.AbstractRenderer.prototype.drawComponent.call(this,r,n,o)}}},e.prototype.drawTables=function(t,e,o,i){o&&this._setContext(o),i&&this.setParameters(i);for(var r in e){if(this.getShowBoundingBoxes())for(var s in e[r].getCells())this.drawCell(e[r].getCells()[s],o);for(var a in e[r].getLines()){var c=e[r].getLines()[a].getData();n(c.getP1(),c.getP2(),this.getContext(),this.getParameters())}}},e.prototype.drawTextLines=function(t,e,n,o){for(var i in e){var r=e[i],s=r.getData();if(s){this.getShowBoundingBoxes()&&this.drawRectangle(s.getBoundingBox(),n,o);var a=r.getTextDocument().getTextSegment().getSelectedCandidate().getLabel();this.drawText(s.getBoundingBox(),a,s.getJustificationType(),s.getTextHeight(),s.getBaselinePos(),n,o);var c=r.getUnderlineList();for(var p in c)this.drawUnderline(s.getBoundingBox(),c[p],a,s.getTextHeight(),s.getBaselinePos()+s.getTextHeight()/10,n,o)}}},e.prototype.drawText=function(t,e,n,o,i,r,s){r&&this._setContext(r),s&&this.setParameters(s);var a=this.getParameters();this.getContext().save();try{this.getContext().fillStyle=a.getColor(),this.getContext().strokeStyle=a.getColor(),this.getContext().globalAlpha=a.getAlpha(),this.getContext().lineWidth=.5*a.getWidth(),this.getContext().font=a.getDecoration()+o+"px "+a.getFont(),this.getContext().textAlign="CENTER"===n?"center":"left",this.getContext().fillText(e,t.getX(),i,t.getWidth())}finally{this.getContext().restore()}},e.prototype.drawUnderline=function(e,o,i,r,s,a,c){a&&this._setContext(a),c&&this.setParameters(c);var p=this.getParameters(),u=e.getTopLeftPoint(),h=o.getData().getFirstCharacter(),g=o.getData().getLastCharacter();this.getContext().font=p.getDecoration()+r+"px "+p.getFont();var l=this.getContext().measureText(i.substring(0,h)),y=u.x+l.width;l=this.getContext().measureText(i.substring(h,g+1));var f=y+l.width;n(new t.Point({x:y,y:s}),new t.Point({x:f,y:s}),this.getContext(),p)},e.prototype.drawGroups=function(t,e,n,o){throw new Error("not implemented")},e.prototype.drawCell=function(t,e,n){t.getData()&&this.drawRectangle(t.getData().getBoundingBox(),e,n)};var n=function(t,e,n,o){n.save();try{n.fillStyle=o.getColor(),n.strokeStyle=o.getColor(),n.globalAlpha=o.getAlpha(),n.lineWidth=.5*o.getWidth(),n.beginPath(),n.moveTo(t.getX(),t.getY()),n.lineTo(e.getX(),e.getY()),n.stroke()}finally{n.restore()}};t.AnalyzerRenderer=e}(MyScript),function(t){function e(e){t.AbstractRenderer.call(this,e),this.stroke=void 0,this.writing=!1}e.prototype=new t.AbstractRenderer,e.prototype.constructor=e,e.prototype.isWriting=function(){return this.writing},e.prototype.getStroke=function(){return this.stroke},e.prototype.startCapture=function(e,n,o){if(this.writing)throw new Error("StrokeComponent capture already running");this.writing=!0,this.stroke=new t.StrokeComponent,this.stroke.setColor(this.penParameters.getColor()),this.stroke.setWidth(this.penParameters.getWidth()),this.stroke.setAlpha(this.penParameters.getAlpha()),this.stroke.addPoint(e,n,o),this.clear(),this.drawStroke(this.stroke)},e.prototype.continueCapture=function(t,e,n){if(!this.writing)throw new Error("Missing startInkCapture");this.stroke.addPoint(t,e,n),this.clear(),this.drawStroke(this.stroke)},e.prototype.endCapture=function(t,e,n){if(!this.writing)throw new Error("Missing startInkCapture");this.stroke.addPoint(t,e,n),this.clear(),this.drawStroke(this.stroke),this.writing=!1},t.InkGrabber=e}(MyScript),function(t){function e(e,o,i){if(this._element=e,this._instanceId=void 0,this._timerId=void 0,this._initialized=!1,this.components=[],this.redoComponents=[],this.lastNonRecoComponentIdx=0,this.resultCallback=i,this.changeCallback=void 0,this.options={type:t.RecognitionType.TEXT,protocol:t.Protocol.REST,width:400,height:300,timeout:2e3,typeset:!1,components:[],textParameters:new t.TextParameter,mathParameters:new t.MathParameter,shapeParameters:new t.ShapeParameter,musicParameters:new t.MusicParameter,analyzerParameters:new t.AnalyzerParameter},this._captureCanvas=n(e,"ms-capture-canvas"),this._inkGrabber=new t.InkGrabber(this._captureCanvas.getContext("2d")),this._renderingCanvas=n(e,"ms-rendering-canvas"),this._textRenderer=new t.TextRenderer(this._renderingCanvas.getContext("2d")),this._mathRenderer=new t.MathRenderer(this._renderingCanvas.getContext("2d")),this._shapeRenderer=new t.ShapeRenderer(this._renderingCanvas.getContext("2d")),this._musicRenderer=new t.MusicRenderer(this._renderingCanvas.getContext("2d")),this._analyzerRenderer=new t.AnalyzerRenderer(this._renderingCanvas.getContext("2d")),this._textRecognizer=new t.TextRecognizer(o?o.host:void 0),this._mathRecognizer=new t.MathRecognizer(o?o.host:void 0),this._shapeRecognizer=new t.ShapeRecognizer(o?o.host:void 0),this._musicRecognizer=new t.MusicRecognizer(o?o.host:void 0),this._analyzerRecognizer=new t.AnalyzerRecognizer(o?o.host:void 0),this._textWSRecognizer=new t.TextWSRecognizer(this._handleMessage.bind(this),o?o.host:void 0),this._mathWSRecognizer=new t.MathWSRecognizer(this._handleMessage.bind(this),o?o.host:void 0),this._attachListeners(e),o)for(var r in o)void 0!==o[r]&&(this.options[r]=o[r]);this._initialize(this._getOptions())}function n(t,e){var n=document.querySelectorAll("canvas[id^="+e+"]").length,o=document.createElement("canvas");return o.id=e+"-"+n,t.appendChild(o),o}function o(t,e){t.changedTouches&&(t=t.changedTouches[0]);var n=e.getBoundingClientRect();return{x:t.clientX-n.left-e.clientLeft,y:t.clientY-n.top-e.clientTop,t:t.timeStamp}}e.prototype.setWidth=function(t){this._captureCanvas.width=t,this._renderingCanvas.width=t,this._initRenderingCanvas()},e.prototype.setHeight=function(t){this._captureCanvas.height=t,this._renderingCanvas.height=t,this._initRenderingCanvas()},e.prototype.setProtocol=function(e){switch(e){case t.Protocol.REST:this._selectedRecognizer=this._selectedRESTRecognizer;break;case t.Protocol.WS:this.setTimeout(-1),this._selectedRecognizer=this._selectedWSRecognizer;break;default:throw new Error("Unknown protocol: "+e)}this._instanceId=void 0,this._initialized=!1,this.lastNonRecoComponentIdx=0},e.prototype.getProtocol=function(){return this._selectedRecognizer instanceof t.AbstractWSRecognizer?t.Protocol.WS:t.Protocol.REST},e.prototype.setType=function(e){switch(e){case t.RecognitionType.TEXT:this._selectedRenderer=this._textRenderer,this._selectedRESTRecognizer=this._textRecognizer,this._selectedWSRecognizer=this._textWSRecognizer;break;case t.RecognitionType.MATH:this._selectedRenderer=this._mathRenderer,this._selectedRESTRecognizer=this._mathRecognizer,this._selectedWSRecognizer=this._mathWSRecognizer;break;case t.RecognitionType.SHAPE:this._selectedRenderer=this._shapeRenderer,this._selectedRESTRecognizer=this._shapeRecognizer;break;case t.RecognitionType.MUSIC:this._selectedRenderer=this._musicRenderer,this._selectedRESTRecognizer=this._musicRecognizer;break;case t.RecognitionType.ANALYZER:this._selectedRenderer=this._analyzerRenderer,this._selectedRESTRecognizer=this._analyzerRecognizer;break;default:throw new Error("Unknown type: "+e)}this._instanceId=void 0,this._initialized=!1,this.lastNonRecoComponentIdx=0},e.prototype.getType=function(){if(this._selectedRenderer instanceof t.TextRenderer)return t.RecognitionType.TEXT;if(this._selectedRenderer instanceof t.MathRenderer)return t.RecognitionType.MATH;if(this._selectedRenderer instanceof t.ShapeRenderer)return t.RecognitionType.SHAPE;if(this._selectedRenderer instanceof t.MusicRenderer)return t.RecognitionType.MUSIC;if(this._selectedRenderer instanceof t.AnalyzerRenderer)return t.RecognitionType.ANALYZER;throw new Error("Unknown type")},e.prototype.getTimeout=function(){return this.timeout},e.prototype.setTimeout=function(t){this.timeout=t},e.prototype.getApplicationKey=function(){return this.applicationKey},e.prototype.setApplicationKey=function(t){this.applicationKey=t},e.prototype.getHmacKey=function(){return this.hmacKey},e.prototype.setHmacKey=function(t){this.hmacKey=t},e.prototype.setLanguage=function(e){this.options.type===t.RecognitionType.TEXT&&(this.isStarted=!1,this._selectedWSRecognizer.resetWSRecognition(),this._selectedWSRecognizer.getParameters().setLanguage(e))},e.prototype.setResultTypes=function(e){this.options.type===t.RecognitionType.MATH&&(this.isStarted=!1,this._selectedWSRecognizer.resetWSRecognition(),this._selectedWSRecognizer.getParameters().setResultTypes(e.map(function(t){return t.toUpperCase()})))},e.prototype.setTextParameters=function(e){if(e){this._selectedRecognizer instanceof t.AbstractWSRecognizer&&(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition());for(var n in e)void 0!==e[n]&&(this._textRecognizer.getParameters()[n]=e[n],this._textWSRecognizer.getParameters()[n]=e[n],this._analyzerRecognizer.getParameters().getTextParameters()[n]=e[n])}},e.prototype.getTextParameters=function(){return this._textRecognizer.getParameters()},e.prototype.setMathParameters=function(e){if(e){this._selectedRecognizer instanceof t.AbstractWSRecognizer&&(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition());for(var n in e)void 0!==e[n]&&(this._mathRecognizer.getParameters()[n]=e[n],this._mathWSRecognizer.getParameters()[n]=e[n])}},e.prototype.getMathParameters=function(){return this._mathRecognizer.getParameters()},e.prototype.setShapeParameters=function(e){if(e){this._selectedRecognizer instanceof t.AbstractWSRecognizer&&(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition());for(var n in e)void 0!==e[n]&&(this._shapeRecognizer.getParameters()[n]=e[n])}},e.prototype.getShapeParameters=function(){return this._shapeRecognizer.getParameters()},e.prototype.setMusicParameters=function(e){if(e){this._selectedRecognizer instanceof t.AbstractWSRecognizer&&(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition());for(var n in e)void 0!==e[n]&&(this._musicRecognizer.getParameters()[n]=e[n])}},e.prototype.getMusicParameters=function(){return this._musicRecognizer.getParameters()},e.prototype.setAnalyzerParameters=function(e){if(e){this._selectedRecognizer instanceof t.AbstractWSRecognizer&&(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition());for(var n in e)void 0!==e[n]&&(this._analyzerRecognizer.getParameters()[n]=e[n])}},e.prototype.getAnalyzerParameters=function(){return this._analyzerRecognizer.getParameters()},e.prototype.setPenParameters=function(t){if(t)for(var e in t)void 0!==t[e]&&(this._textRenderer.getParameters()[e]=t[e],this._mathRenderer.getParameters()[e]=t[e],this._shapeRenderer.getParameters()[e]=t[e],this._musicRenderer.getParameters()[e]=t[e],this._analyzerRenderer.getParameters[e]=t[e])},e.prototype.getPenParameters=function(){return this._selectedRenderer.getParameters()},e.prototype.setTypeset=function(t){this._textRenderer.setTypeset(t),this._mathRenderer.setTypeset(t),this._shapeRenderer.setTypeset(t),this._musicRenderer.setTypeset(t),this._analyzerRenderer.setTypeset(t)},e.prototype._initialize=function(t){this._setHost(t.host),this.setTextParameters(t.textParameters),this.setMathParameters(t.mathParameters),this.setShapeParameters(t.shapeParameters),this.setMusicParameters(t.musicParameters),this.setAnalyzerParameters(t.analyzerParameters),this.setType(t.type),this.setProtocol(t.protocol),this.setTimeout(t.timeout),this.setApplicationKey(t.applicationKey),this.setHmacKey(t.hmacKey),this.setPenParameters(t.penParameters),this.setTypeset(t.typeset),this.setWidth(t.width),this.setHeight(t.height)},e.prototype._getOptions=function(){return this.options},e.prototype.getAvailableLanguages=function(){return this._selectedRecognizer.getAvailableLanguageList(this.getApplicationKey(),this._textRecognizer.getParameters().getInputMode())},e.prototype.getRenderer=function(){return this._selectedRenderer},e.prototype.getInkGrabber=function(){return this._inkGrabber},e.prototype.getRecognizer=function(){return this._selectedRecognizer},e.prototype.setCallback=function(t){this.resultCallback=t},e.prototype.setChangeCallback=function(t){this.changeCallback=t},e.prototype.setResultCallback=function(t){this.resultCallback=t},e.prototype.recognize=function(){return this._doRecognition(this.components)},e.prototype.canUndo=function(){return this.components.length>0},e.prototype.undo=function(){this.canUndo()&&(this.redoComponents.push(this.components.pop()),this._selectedRecognizer instanceof t.ShapeRecognizer&&(this.lastNonRecoComponentIdx=0,this._instanceId&&(this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this._inkGrabber.clear(),this._instanceId=void 0)),this._initRenderingCanvas(),this._onChange({canUndo:this.canUndo(),canRedo:this.canRedo()}),this._selectedRecognizer instanceof t.AbstractWSRecognizer?(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition()):(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1?this.recognize():this._onResult()))},e.prototype.canRedo=function(){return this.redoComponents.length>0},e.prototype.redo=function(){this.canRedo()&&(this.components.push(this.redoComponents.pop()),this._selectedRecognizer instanceof t.ShapeRecognizer&&(this.lastNonRecoComponentIdx=0,this._instanceId&&(this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this._inkGrabber.clear(),this._instanceId=void 0)),this._initRenderingCanvas(),this._onChange({canUndo:this.canUndo(),canRedo:this.canRedo()}),this._selectedRecognizer instanceof t.AbstractWSRecognizer?this.recognize():(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1?this.recognize():this._onResult()))},e.prototype.clear=function(){this._selectedRecognizer instanceof t.ShapeRecognizer&&this._instanceId&&(this._selectedRecognizer.clearShapeRecognitionSession(this.getApplicationKey(),this._instanceId),this._instanceId=void 0),this.components=[],this.redoComponents=[],this.lastNonRecoComponentIdx=0,this._inkGrabber.clear(),this._instanceId=void 0,this._initRenderingCanvas(),this._onChange({canUndo:this.canUndo(),canRedo:this.canRedo()}),this._selectedRecognizer instanceof t.AbstractWSRecognizer?(this.isStarted=!1,this._selectedRecognizer.resetWSRecognition()):(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1?this.recognize():this._onResult())},e.event={addDomListener:function(t,e,n){t.addEventListener(e,n)}},e.prototype._down=function(t,e,n){this._captureCanvas.clientHeight!=this._captureCanvas.height&&(this._captureCanvas.height=this._captureCanvas.clientHeight,this._renderingCanvas.height=this._renderingCanvas.clientHeight),this._captureCanvas.clientWidth!=this._captureCanvas.width&&(this._captureCanvas.width=this._captureCanvas.clientWidth,this._renderingCanvas.width=this._renderingCanvas.clientWidth),this.canRedo()&&(this.redoComponents=[],this._onChange({canUndo:this.canUndo(),canRedo:this.canRedo()})),this._inkGrabber.startCapture(t,e,n)},e.prototype._move=function(t,e,n){this._inkGrabber.continueCapture(t,e,n)},e.prototype._up=function(e,n,o){this._inkGrabber.endCapture(e,n,o);var i=this._inkGrabber.getStroke();this._inkGrabber.clear(),this._selectedRenderer.drawComponent(i),this.components.push(i),this._onChange({canUndo:this.canUndo(),canRedo:this.canRedo()}),this._selectedRecognizer instanceof t.AbstractWSRecognizer?this._selectedRecognizer.isOpen()||this._selectedRecognizer.isConnecting()?this.recognize():this._selectedRecognizer.open():(clearTimeout(this._timerId),this.getTimeout()>0?this._timerId=setTimeout(this.recognize.bind(this),this.getTimeout()):this.getTimeout()>-1&&this.recognize())},e.prototype._doRecognition=function(e){if(e.length>0)if(this._selectedRecognizer instanceof t.AbstractWSRecognizer){if(this._initialized){var n=[];if(this._selectedRecognizer instanceof t.TextWSRecognizer){var o=new t.TextInputUnit;o.setComponents(this._getOptions().components.concat(e.slice(this.lastNonRecoComponentIdx))),n=[o]}else n=e.slice(this.lastNonRecoComponentIdx);this.lastNonRecoComponentIdx=e.length,this.isStarted?this._selectedRecognizer.continueWSRecognition(n,this._instanceId):(this.isStarted=!0,this._selectedRecognizer.startWSRecognition(n))}}else{var i=[];if(this._selectedRecognizer instanceof t.TextRecognizer){var r=new t.TextInputUnit;r.setComponents(this._getOptions().components.concat(e)),i=[r]}else this._selectedRecognizer instanceof t.ShapeRecognizer?(i=e.slice(this.lastNonRecoComponentIdx),this.lastNonRecoComponentIdx=e.length):i=i.concat(this._getOptions().components,e);this._selectedRecognizer.doSimpleRecognition(this.getApplicationKey(),this._instanceId,i,this.getHmacKey()).then(function(t){return this._parseResult(t,i)}.bind(this),function(t){return this._onResult(void 0,t),t}.bind(this)).done()}else this.isStarted=!1,this._selectedRenderer.clear(),this._initRenderingCanvas(),this._onResult()},e.prototype._onResult=function(t,e){this.resultCallback&&this.resultCallback(t,e),e?this._element.dispatchEvent(new CustomEvent("failure",{detail:e})):this._element.dispatchEvent(new CustomEvent("success",{detail:t}))},e.prototype._onChange=function(t){this.changeCallback&&this.changeCallback(t),this._element.dispatchEvent(new CustomEvent("changed",{detail:t}))},e.prototype._parseResult=function(t,e){if(this._instanceId){if(this._instanceId!==t.getInstanceId())return this._onResult(t),t}else this._instanceId=t.getInstanceId();return(t.getDocument().hasScratchOutResults()||this._selectedRenderer.isTypesetting())&&(this._selectedRenderer.clear(),
this._selectedRenderer.drawRecognitionResult(e,t.getDocument())),this._onResult(t),t},e.prototype._setHost=function(t){this._textRecognizer.setHost(t),this._mathRecognizer.setHost(t),this._shapeRecognizer.setHost(t),this._musicRecognizer.setHost(t),this._analyzerRecognizer.setHost(t)},e.prototype._attachListeners=function(t){var e,n=this;t.addEventListener("pointerdown",function(i){if(!e){e=i.pointerId,i.preventDefault();var r=o(i,t);n._down(r.x,r.y,r.t)}},!1),t.addEventListener("pointermove",function(i){if(e===i.pointerId){i.preventDefault();var r=o(i,t);n._move(r.x,r.y,r.t)}},!1),t.addEventListener("pointerup",function(i){if(e===i.pointerId){i.preventDefault();var r=o(i,t);n._up(r.x,r.y,r.t),e=void 0}},!1),t.addEventListener("pointerleave",function(t){e===t.pointerId&&(t.preventDefault(),console.log("pointerenter"),console.log(t))},!1),t.addEventListener("pointerleave",function(i){if(e===i.pointerId){i.preventDefault();var r=o(i,t);n._up(r.x,r.y,r.t),e=void 0}},!1)},e.prototype._initRenderingCanvas=function(){this._selectedRenderer.clear(),this._drawInput(this.components)},e.prototype._drawInput=function(e){if(this._selectedRecognizer instanceof t.MusicRecognizer){if(!(this._selectedRecognizer.getParameters().getStaff()instanceof t.MusicStaff))throw new Error("Missing music staff");this._selectedRenderer.drawStaff(this._selectedRecognizer.getParameters().getStaff())}this._selectedRenderer.drawComponents(this._getOptions().components.concat(e))},e.prototype._handleMessage=function(t,e){var n=!1;if(e&&(n=!0,this._instanceId=void 0,this.isStarted=!1,this.lastNonRecoComponentIdx=0,this._onResult(void 0,e)),t)switch(t.type){case"open":this._selectedWSRecognizer.initWSRecognition(this.getApplicationKey());break;case"hmacChallenge":this._selectedWSRecognizer.takeUpHmacChallenge(this.getApplicationKey(),t.getChallenge(),this.getHmacKey());break;case"init":this.isStarted=!1,this._initialized=!0,this._instanceId=void 0,this.lastNonRecoComponentIdx=0,this.recognize();break;case"reset":this._instanceId=void 0,this.lastNonRecoComponentIdx=0,this.recognize();break;case"close":this._initialized=!1,this._instanceId=void 0,this.lastNonRecoComponentIdx=0;break;default:this._parseResult(t,this.components)}return n},t.InkPaper=e}(MyScript);
//# sourceMappingURL=myscript.min.js.map
